function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}define(["react","big.js","mendix/filters/builders"],(function(e,t,n){"use strict";function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=i(t);function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var s,a={exports:{}};
/*!
  	Copyright (c) 2018 Jed Watson.
  	Licensed under the MIT License (MIT), see
  	http://jedwatson.github.io/classnames
  */var l,u,c=(s||(s=1,l=a,function(){var e={}.hasOwnProperty;function t(){for(var n=[],i=0;i<arguments.length;i++){var o=arguments[i];if(o){var r=typeof o;if("string"===r||"number"===r)n.push(o);else if(Array.isArray(o)){if(o.length){var s=t.apply(null,o);s&&n.push(s)}}else if("object"===r){if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]")){n.push(o.toString());continue}for(var a in o)e.call(o,a)&&o[a]&&n.push(a)}}}return n.join(" ")}l.exports?(t.default=t,l.exports=t):window.classNames=t}()),a.exports),d=r(c),p={exports:{}};var h=function(){if(u)return p.exports;u=1;var e={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Ấ":"A","Ắ":"A","Ẳ":"A","Ẵ":"A","Ặ":"A","Æ":"AE","Ầ":"A","Ằ":"A","Ȃ":"A","Ả":"A","Ạ":"A","Ẩ":"A","Ẫ":"A","Ậ":"A","Ç":"C","Ḉ":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ế":"E","Ḗ":"E","Ề":"E","Ḕ":"E","Ḝ":"E","Ȇ":"E","Ẻ":"E","Ẽ":"E","Ẹ":"E","Ể":"E","Ễ":"E","Ệ":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ḯ":"I","Ȋ":"I","Ỉ":"I","Ị":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","Ố":"O","Ṍ":"O","Ṓ":"O","Ȏ":"O","Ỏ":"O","Ọ":"O","Ổ":"O","Ỗ":"O","Ộ":"O","Ờ":"O","Ở":"O","Ỡ":"O","Ớ":"O","Ợ":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ủ":"U","Ụ":"U","Ử":"U","Ữ":"U","Ự":"U","Ý":"Y","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","ấ":"a","ắ":"a","ẳ":"a","ẵ":"a","ặ":"a","æ":"ae","ầ":"a","ằ":"a","ȃ":"a","ả":"a","ạ":"a","ẩ":"a","ẫ":"a","ậ":"a","ç":"c","ḉ":"c","è":"e","é":"e","ê":"e","ë":"e","ế":"e","ḗ":"e","ề":"e","ḕ":"e","ḝ":"e","ȇ":"e","ẻ":"e","ẽ":"e","ẹ":"e","ể":"e","ễ":"e","ệ":"e","ì":"i","í":"i","î":"i","ï":"i","ḯ":"i","ȋ":"i","ỉ":"i","ị":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","ố":"o","ṍ":"o","ṓ":"o","ȏ":"o","ỏ":"o","ọ":"o","ổ":"o","ỗ":"o","ộ":"o","ờ":"o","ở":"o","ỡ":"o","ớ":"o","ợ":"o","ù":"u","ú":"u","û":"u","ü":"u","ủ":"u","ụ":"u","ử":"u","ữ":"u","ự":"u","ý":"y","ÿ":"y","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Ĉ":"C","ĉ":"c","Ċ":"C","ċ":"c","Č":"C","č":"c","C̆":"C","c̆":"c","Ď":"D","ď":"d","Đ":"D","đ":"d","Ē":"E","ē":"e","Ĕ":"E","ĕ":"e","Ė":"E","ė":"e","Ę":"E","ę":"e","Ě":"E","ě":"e","Ĝ":"G","Ǵ":"G","ĝ":"g","ǵ":"g","Ğ":"G","ğ":"g","Ġ":"G","ġ":"g","Ģ":"G","ģ":"g","Ĥ":"H","ĥ":"h","Ħ":"H","ħ":"h","Ḫ":"H","ḫ":"h","Ĩ":"I","ĩ":"i","Ī":"I","ī":"i","Ĭ":"I","ĭ":"i","Į":"I","į":"i","İ":"I","ı":"i","Ĳ":"IJ","ĳ":"ij","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","Ḱ":"K","ḱ":"k","K̆":"K","k̆":"k","Ĺ":"L","ĺ":"l","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ŀ":"L","ŀ":"l","Ł":"l","ł":"l","Ḿ":"M","ḿ":"m","M̆":"M","m̆":"m","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","ŉ":"n","N̆":"N","n̆":"n","Ō":"O","ō":"o","Ŏ":"O","ŏ":"o","Ő":"O","ő":"o","Œ":"OE","œ":"oe","P̆":"P","p̆":"p","Ŕ":"R","ŕ":"r","Ŗ":"R","ŗ":"r","Ř":"R","ř":"r","R̆":"R","r̆":"r","Ȓ":"R","ȓ":"r","Ś":"S","ś":"s","Ŝ":"S","ŝ":"s","Ş":"S","Ș":"S","ș":"s","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","ț":"t","Ț":"T","Ť":"T","ť":"t","Ŧ":"T","ŧ":"t","T̆":"T","t̆":"t","Ũ":"U","ũ":"u","Ū":"U","ū":"u","Ŭ":"U","ŭ":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ȗ":"U","ȗ":"u","V̆":"V","v̆":"v","Ŵ":"W","ŵ":"w","Ẃ":"W","ẃ":"w","X̆":"X","x̆":"x","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Y̆":"Y","y̆":"y","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z","ſ":"s","ƒ":"f","Ơ":"O","ơ":"o","Ư":"U","ư":"u","Ǎ":"A","ǎ":"a","Ǐ":"I","ǐ":"i","Ǒ":"O","ǒ":"o","Ǔ":"U","ǔ":"u","Ǖ":"U","ǖ":"u","Ǘ":"U","ǘ":"u","Ǚ":"U","ǚ":"u","Ǜ":"U","ǜ":"u","Ứ":"U","ứ":"u","Ṹ":"U","ṹ":"u","Ǻ":"A","ǻ":"a","Ǽ":"AE","ǽ":"ae","Ǿ":"O","ǿ":"o","Þ":"TH","þ":"th","Ṕ":"P","ṕ":"p","Ṥ":"S","ṥ":"s","X́":"X","x́":"x","Ѓ":"Г","ѓ":"г","Ќ":"К","ќ":"к","A̋":"A","a̋":"a","E̋":"E","e̋":"e","I̋":"I","i̋":"i","Ǹ":"N","ǹ":"n","Ồ":"O","ồ":"o","Ṑ":"O","ṑ":"o","Ừ":"U","ừ":"u","Ẁ":"W","ẁ":"w","Ỳ":"Y","ỳ":"y","Ȁ":"A","ȁ":"a","Ȅ":"E","ȅ":"e","Ȉ":"I","ȉ":"i","Ȍ":"O","ȍ":"o","Ȑ":"R","ȑ":"r","Ȕ":"U","ȕ":"u","B̌":"B","b̌":"b","Č̣":"C","č̣":"c","Ê̌":"E","ê̌":"e","F̌":"F","f̌":"f","Ǧ":"G","ǧ":"g","Ȟ":"H","ȟ":"h","J̌":"J","ǰ":"j","Ǩ":"K","ǩ":"k","M̌":"M","m̌":"m","P̌":"P","p̌":"p","Q̌":"Q","q̌":"q","Ř̩":"R","ř̩":"r","Ṧ":"S","ṧ":"s","V̌":"V","v̌":"v","W̌":"W","w̌":"w","X̌":"X","x̌":"x","Y̌":"Y","y̌":"y","A̧":"A","a̧":"a","B̧":"B","b̧":"b","Ḑ":"D","ḑ":"d","Ȩ":"E","ȩ":"e","Ɛ̧":"E","ɛ̧":"e","Ḩ":"H","ḩ":"h","I̧":"I","i̧":"i","Ɨ̧":"I","ɨ̧":"i","M̧":"M","m̧":"m","O̧":"O","o̧":"o","Q̧":"Q","q̧":"q","U̧":"U","u̧":"u","X̧":"X","x̧":"x","Z̧":"Z","z̧":"z","й":"и","Й":"И","ё":"е","Ё":"Е"},t=Object.keys(e).join("|"),n=new RegExp(t,"g"),i=new RegExp(t,"");function o(t){return e[t]}var r=function(e){return e.replace(n,o)};return p.exports=r,p.exports.has=function(e){return!!e.match(i)},p.exports.remove=r,p.exports}(),m=r(h);
/**
   * @name match-sorter
   * @license MIT license.
   * @copyright (c) 2020 Kent C. Dodds
   * @author Kent C. Dodds <me@kentcdodds.com> (https://kentcdodds.com)
   */
const v={CASE_SENSITIVE_EQUAL:7,EQUAL:6,STARTS_WITH:5,WORD_STARTS_WITH:4,CONTAINS:3,ACRONYM:2,MATCHES:1,NO_MATCH:0},f=(e,t)=>String(e.rankedValue).localeCompare(String(t.rankedValue));function g(e,t,n){void 0===n&&(n={});const{keys:i,threshold:o=v.MATCHES,baseSort:r=f,sorter:s=(e=>e.sort(((e,t)=>b(e,t,r))))}=n,a=e.reduce((function(e,r,s){const a=function(e,t,n,i){if(!t){return{rankedValue:e,rank:y(e,n,i),keyIndex:-1,keyThreshold:i.threshold}}const o=function(e,t){const n=[];for(let i=0,o=t.length;i<o;i++){const o=t[i],r=w(o),s=x(e,o);for(let e=0,t=s.length;e<t;e++)n.push({itemValue:s[e],attributes:r})}return n}(e,t);return o.reduce(((e,t,o)=>{let{rank:r,rankedValue:s,keyIndex:a,keyThreshold:l}=e,{itemValue:u,attributes:c}=t,d=y(u,n,i),p=s;const{minRanking:h,maxRanking:m,threshold:f}=c;return d<h&&d>=v.MATCHES?d=h:d>m&&(d=m),d>r&&(r=d,a=o,l=f,p=u),{rankedValue:p,rank:r,keyIndex:a,keyThreshold:l}}),{rankedValue:e,rank:v.NO_MATCH,keyIndex:-1,keyThreshold:i.threshold})}(r,i,t,n),{rank:l,keyThreshold:u=o}=a;l>=u&&e.push({...a,item:r,index:s});return e}),[]);return s(a).map((e=>{let{item:t}=e;return t}))}function y(e,t,n){return e=I(e,n),(t=I(t,n)).length>e.length?v.NO_MATCH:e===t?v.CASE_SENSITIVE_EQUAL:(e=e.toLowerCase())===(t=t.toLowerCase())?v.EQUAL:e.startsWith(t)?v.STARTS_WITH:e.includes(" ".concat(t))?v.WORD_STARTS_WITH:e.includes(t)?v.CONTAINS:1===t.length?v.NO_MATCH:function(e){let t="";return e.split(" ").forEach((e=>{e.split("-").forEach((e=>{t+=e.substr(0,1)}))})),t}(e).includes(t)?v.ACRONYM:function(e,t){let n=0,i=0;function o(e,t,i){for(let o=i,r=t.length;o<r;o++){if(t[o]===e)return n+=1,o+1}return-1}function r(e){const i=1/e,o=n/t.length;return v.MATCHES+o*i}const s=o(t[0],e,0);if(s<0)return v.NO_MATCH;i=s;for(let n=1,r=t.length;n<r;n++){i=o(t[n],e,i);if(!(i>-1))return v.NO_MATCH}return r(i-s)}(e,t)}function b(e,t,n){const{rank:i,keyIndex:o}=e,{rank:r,keyIndex:s}=t;return i===r?o===s?n(e,t):o<s?-1:1:i>r?-1:1}function I(e,t){let{keepDiacritics:n}=t;return e="".concat(e),n||(e=m(e)),e}function x(e,t){let n;if("object"==typeof t&&(t=t.key),"function"==typeof t)n=t(e);else if(null==e)n=null;else if(Object.hasOwnProperty.call(e,t))n=e[t];else{if(t.includes("."))return function(e,t){const n=e.split(".");let i=[t];for(let e=0,t=n.length;e<t;e++){const t=n[e];let o=[];for(let e=0,n=i.length;e<n;e++){const n=i[e];if(null!=n)if(Object.hasOwnProperty.call(n,t)){const e=n[t];null!=e&&o.push(e)}else"*"===t&&(o=o.concat(n))}i=o}if(Array.isArray(i[0])){return[].concat(...i)}return i}(t,e);n=null}return null==n?[]:Array.isArray(n)?n:[String(n)]}g.rankings=v;const C={maxRanking:1/0,minRanking:-1/0};function w(e){return"string"==typeof e?C:{...C,...e}}const T=100;function E(t){const{htmlFor:n,children:i,onClick:o}=t;return e.createElement(null==n?"span":"label",{children:i,className:"widget-combobox-caption-text",htmlFor:n,onClick:o||(n?e=>{e.preventDefault()}:void 0)})}function S(e){switch(e){case"contains":return{};case"containsExact":return{threshold:g.rankings.CONTAINS};case"startsWith":return{threshold:g.rankings.WORD_STARTS_WITH};case"none":return{threshold:g.rankings.NO_MATCH}}}function O(e,n){return void 0===e||void 0===n?e===n:e instanceof t.Big&&n instanceof t.Big?e.eq(n):e instanceof Date&&n instanceof Date?e.getTime()===n.getTime():e===n}function P(e,t,n,i){return e?function(e,t,n,i){if("caption"===t)return e.sort(((e,t)=>{var o,r,s,a;const l=null!==(o=null===(r=i(e))||void 0===r?void 0:r.toString())&&void 0!==o?o:"",u=null!==(s=null===(a=i(t))||void 0===a?void 0:a.toString())&&void 0!==s?s:"";return"asc"===n?l.localeCompare(u):u.localeCompare(l)}));return e}(e.map((e=>{var t;return null!==(t=null==e?void 0:e.id)&&void 0!==t?t:null})),t,n,i):null}function _(t){let{size:n=14}=t;return e.createElement("span",{className:"widget-combobox-icon-container"},e.createElement("svg",{width:n,height:n,viewBox:"0 0 32 32",className:"widget-combobox-clear-button-icon"},e.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",fill:"currentColor",d:"M27.71 5.71004L26.29 4.29004L16 14.59L5.71004 4.29004L4.29004 5.71004L14.59 16L4.29004 26.29L5.71004 27.71L16 17.41L26.29 27.71L27.71 26.29L17.41 16L27.71 5.71004Z"})))}function k(t){let{isOpen:n}=t;return e.createElement("span",{className:"widget-combobox-icon-container"},e.createElement("svg",{className:d("widget-combobox-down-arrow-icon","mx-icon-lined","mx-icon-chevron-down",{active:n}),width:"16",height:"16",viewBox:"0 0 32 32"},e.createElement("path",{d:"M16 23.41L4.29004 11.71L5.71004 10.29L16 20.59L26.29 10.29L27.71 11.71L16 23.41Z"})))}function M(t){let{checked:n,id:i,focusable:o,onClick:r,ariaLabel:s}=t;return e.createElement(e.Fragment,null,e.createElement("span",{className:"widget-combobox-icon-container"},e.createElement("input",{type:"checkbox",tabIndex:o?0:-1,checked:n,id:i,role:"presentation",onClick:r||(e=>{e.preventDefault()}),onChange:()=>{}})),s?e.createElement(E,{htmlFor:i},s):void 0)}function A(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.includes(i))continue;n[i]=e[i]}return n}function L(){return L=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},L.apply(null,arguments)}var V,D,N,R,F,B={exports:{}};function K(){if(D)return V;D=1;return V="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}function H(){if(R)return N;R=1;var e=K();function t(){}function n(){}return n.resetWarningCache=t,N=function(){function i(t,n,i,o,r,s){if(s!==e){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function o(){return i}i.isRequired=i;var r={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:o,element:i,elementType:i,instanceOf:o,node:i,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:n,resetWarningCache:t};return r.PropTypes=r,r}}function z(){return F||(F=1,B.exports=H()()),B.exports}var j,U,W=r(z()),$={exports:{}},q={};U||(U=1,$.exports=function(){if(j)return q;j=1;var e=60103,t=60106,n=60107,i=60108,o=60114,r=60109,s=60110,a=60112,l=60113,u=60120,c=60115,d=60116,p=60121,h=60122,m=60117,v=60129,f=60131;if("function"==typeof Symbol&&Symbol.for){var g=Symbol.for;e=g("react.element"),t=g("react.portal"),n=g("react.fragment"),i=g("react.strict_mode"),o=g("react.profiler"),r=g("react.provider"),s=g("react.context"),a=g("react.forward_ref"),l=g("react.suspense"),u=g("react.suspense_list"),c=g("react.memo"),d=g("react.lazy"),p=g("react.block"),h=g("react.server.block"),m=g("react.fundamental"),v=g("react.debug_trace_mode"),f=g("react.legacy_hidden")}function y(p){if("object"==typeof p&&null!==p){var h=p.$$typeof;switch(h){case e:switch(p=p.type){case n:case o:case i:case l:case u:return p;default:switch(p=p&&p.$$typeof){case s:case a:case d:case c:case r:return p;default:return h}}case t:return h}}}var b=r,I=e,x=a,C=n,w=d,T=c,E=t,S=o,O=i,P=l;return q.ContextConsumer=s,q.ContextProvider=b,q.Element=I,q.ForwardRef=x,q.Fragment=C,q.Lazy=w,q.Memo=T,q.Portal=E,q.Profiler=S,q.StrictMode=O,q.Suspense=P,q.isAsyncMode=function(){return!1},q.isConcurrentMode=function(){return!1},q.isContextConsumer=function(e){return y(e)===s},q.isContextProvider=function(e){return y(e)===r},q.isElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===e},q.isForwardRef=function(e){return y(e)===a},q.isFragment=function(e){return y(e)===n},q.isLazy=function(e){return y(e)===d},q.isMemo=function(e){return y(e)===c},q.isPortal=function(e){return y(e)===t},q.isProfiler=function(e){return y(e)===o},q.isStrictMode=function(e){return y(e)===i},q.isSuspense=function(e){return y(e)===l},q.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===n||e===o||e===v||e===i||e===l||e===u||e===f||"object"==typeof e&&null!==e&&(e.$$typeof===d||e.$$typeof===c||e.$$typeof===r||e.$$typeof===s||e.$$typeof===a||e.$$typeof===m||e.$$typeof===p||e[0]===h)},q.typeOf=y,q}()),$.exports;let Y=e=>"object"==typeof e&&null!=e&&1===e.nodeType,X=(e,t)=>(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e,Q=(e,t)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){let n=getComputedStyle(e,null);return X(n.overflowY,t)||X(n.overflowX,t)||(e=>{let t=(e=>{if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}})(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)})(e)}return!1},Z=(e,t,n,i,o,r,s,a)=>r<e&&s>t||r>e&&s<t?0:r<=e&&a<=n||s>=t&&a>=n?r-e-i:s>t&&a<n||r<e&&a>n?s-t+o:0,G=e=>{let t=e.parentElement;return null==t?e.getRootNode().host||null:t};var J=function(){return J=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},J.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var ee=0;function te(){}function ne(e,t,n){return e===t||t instanceof n.Node&&e.contains&&e.contains(t)}function ie(e,t){var n;function i(){n&&clearTimeout(n)}function o(){for(var o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];i(),n=setTimeout((function(){n=null,e.apply(void 0,r)}),t)}return o.cancel=i,o}function oe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return t.some((function(t){return t&&t.apply(void 0,[e].concat(i)),e.preventDownshiftDefault||e.hasOwnProperty("nativeEvent")&&e.nativeEvent.preventDownshiftDefault}))}}function re(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){t.forEach((function(t){"function"==typeof t?t(e):t&&(t.current=e)}))}}function se(e,t){return Object.keys(e).reduce((function(n,i){return n[i]=ae(t,i)?t[i]:e[i],n}),{})}function ae(e,t){return void 0!==e[t]}function le(e){var t=e.key,n=e.keyCode;return n>=37&&n<=40&&0!==t.indexOf("Arrow")?"Arrow"+t:t}function ue(e,t,n,i,o){if(void 0===o&&(o=!0),0===n)return-1;var r=n-1;("number"!=typeof t||t<0||t>=n)&&(t=e>0?-1:r+1);var s=t+e;s<0?s=o?r:0:s>r&&(s=o?0:r);var a=ce(e,s,n,i,o);return-1===a?t>=n?-1:t:a}function ce(e,t,n,i,o){var r=i(t);if(!r||!r.hasAttribute("disabled"))return t;if(e>0){for(var s=t+1;s<n;s++)if(!i(s).hasAttribute("disabled"))return s}else for(var a=t-1;a>=0;a--)if(!i(a).hasAttribute("disabled"))return a;return o?e>0?ce(1,0,n,i,!1):ce(-1,n-1,n,i,!1):-1}function de(e,t,n,i){return void 0===i&&(i=!0),t.some((function(t){return t&&(ne(t,e,n)||i&&ne(t,n.document.activeElement,n))}))}var pe=ie((function(e){me(e).textContent=""}),500);function he(e,t){var n=me(t);e&&(n.textContent=e,pe(t))}function me(e){void 0===e&&(e=document);var t=e.getElementById("a11y-status-message");return t||((t=e.createElement("div")).setAttribute("id","a11y-status-message"),t.setAttribute("role","status"),t.setAttribute("aria-live","polite"),t.setAttribute("aria-relevant","additions text"),Object.assign(t.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),e.body.appendChild(t),t)}var ve=["isInitialMount","highlightedIndex","items","environment"],fe={highlightedIndex:-1,isOpen:!1,selectedItem:null,inputValue:""};function ge(e,t,n){var i=e.props,o=e.type,r={};Object.keys(t).forEach((function(i){!function(e,t,n,i){var o=t.props,r=t.type,s="on"+Ce(e)+"Change";o[s]&&void 0!==i[e]&&i[e]!==n[e]&&o[s](L({type:r},i))}(i,e,t,n),n[i]!==t[i]&&(r[i]=n[i])})),i.onStateChange&&Object.keys(r).length&&i.onStateChange(L({type:o},r))}var ye=ie((function(e,t){he(e(),t)}),200),be="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?e.useLayoutEffect:e.useEffect;function Ie(t){var n=t.id,i=void 0===n?"downshift-"+String(ee++):n,o=t.labelId,r=t.menuId,s=t.getItemId,a=t.toggleButtonId,l=t.inputId;return e.useRef({labelId:o||i+"-label",menuId:r||i+"-menu",getItemId:s||function(e){return i+"-item-"+e},toggleButtonId:a||i+"-toggle-button",inputId:l||i+"-input"}).current}function xe(e,t,n,i){var o,r;if(void 0===e){if(void 0===t)throw new Error(i);o=n[t],r=t}else r=void 0===t?n.indexOf(e):t,o=e;return[o,r]}function Ce(e){return""+e.slice(0,1).toUpperCase()+e.slice(1)}function we(t){var n=e.useRef(t);return n.current=t,n}function Te(t,n,i){var o=e.useRef(),r=e.useRef(),s=e.useCallback((function(e,n){r.current=n,e=se(e,n.props);var i=t(e,n);return n.props.stateReducer(e,L({},n,{changes:i}))}),[t]),a=e.useReducer(s,n),l=a[0],u=a[1],c=we(i),d=e.useCallback((function(e){return u(L({props:c.current},e))}),[c]),p=r.current;return e.useEffect((function(){p&&o.current&&o.current!==l&&ge(p,se(o.current,p.props),l),o.current=l}),[l,i,p]),[l,d]}var Ee={itemToString:function(e){return e?String(e):""},stateReducer:function(e,t){return t.changes},getA11ySelectionMessage:function(e){var t=e.selectedItem,n=e.itemToString;return t?n(t)+" has been selected.":""},scrollIntoView:function(e,t){if(e){var n=((e,t)=>{var n,i,o,r,s,a;if("undefined"==typeof document)return[];let{scrollMode:l,block:u,inline:c,boundary:d,skipOverflowHiddenElements:p}=t,h="function"==typeof d?d:e=>e!==d;if(!Y(e))throw new TypeError("Invalid target");let m=document.scrollingElement||document.documentElement,v=[],f=e;for(;Y(f)&&h(f);){if(f=G(f),f===m){v.push(f);break}null!=f&&f===document.body&&Q(f)&&!Q(document.documentElement)||null!=f&&Q(f,p)&&v.push(f)}let g=null!=(i=null==(n=window.visualViewport)?void 0:n.width)?i:innerWidth,y=null!=(r=null==(o=window.visualViewport)?void 0:o.height)?r:innerHeight,b=null!=(s=window.scrollX)?s:pageXOffset,I=null!=(a=window.scrollY)?a:pageYOffset,{height:x,width:C,top:w,right:T,bottom:E,left:S}=e.getBoundingClientRect(),O="start"===u||"nearest"===u?w:"end"===u?E:w+x/2,P="center"===c?S+C/2:"end"===c?T:S,_=[];for(let e=0;e<v.length;e++){let t=v[e],{height:n,width:i,top:o,right:r,bottom:s,left:a}=t.getBoundingClientRect();if("if-needed"===l&&w>=0&&S>=0&&E<=y&&T<=g&&w>=o&&E<=s&&S>=a&&T<=r)return _;let d=getComputedStyle(t),p=parseInt(d.borderLeftWidth,10),h=parseInt(d.borderTopWidth,10),f=parseInt(d.borderRightWidth,10),k=parseInt(d.borderBottomWidth,10),M=0,A=0,L="offsetWidth"in t?t.offsetWidth-t.clientWidth-p-f:0,V="offsetHeight"in t?t.offsetHeight-t.clientHeight-h-k:0,D="offsetWidth"in t?0===t.offsetWidth?0:i/t.offsetWidth:0,N="offsetHeight"in t?0===t.offsetHeight?0:n/t.offsetHeight:0;if(m===t)M="start"===u?O:"end"===u?O-y:"nearest"===u?Z(I,I+y,y,h,k,I+O,I+O+x,x):O-y/2,A="start"===c?P:"center"===c?P-g/2:"end"===c?P-g:Z(b,b+g,g,p,f,b+P,b+P+C,C),M=Math.max(0,M+I),A=Math.max(0,A+b);else{M="start"===u?O-o-h:"end"===u?O-s+k+V:"nearest"===u?Z(o,s,n,h,k+V,O,O+x,x):O-(o+n/2)+V/2,A="start"===c?P-a-p:"center"===c?P-(a+i/2)+L/2:"end"===c?P-r+f+L:Z(a,r,i,p,f+L,P,P+C,C);let{scrollLeft:e,scrollTop:l}=t;M=Math.max(0,Math.min(l+M/N,t.scrollHeight-n/N+V)),A=Math.max(0,Math.min(e+A/D,t.scrollWidth-i/D+L)),O+=l-M,P+=e-A}_.push({el:t,top:M,left:A})}return _})(e,{boundary:t,block:"nearest",scrollMode:"if-needed"});n.forEach((function(e){var t=e.el,n=e.top,i=e.left;t.scrollTop=n,t.scrollLeft=i}))}},environment:"undefined"==typeof window?{}:window};function Se(e,t,n){void 0===n&&(n=fe);var i=e["default"+Ce(t)];return void 0!==i?i:n[t]}function Oe(e,t,n){void 0===n&&(n=fe);var i=e[t];if(void 0!==i)return i;var o=e["initial"+Ce(t)];return void 0!==o?o:Se(e,t,n)}function Pe(e,t,n){var i=e.items,o=e.initialHighlightedIndex,r=e.defaultHighlightedIndex,s=t.selectedItem,a=t.highlightedIndex;return 0===i.length?-1:void 0!==o&&a===o?o:void 0!==r?r:s?i.indexOf(s):0===n?-1:n<0?i.length-1:0}var _e=function(){return te};function ke(t,n,i){var o=i.isInitialMount,r=i.highlightedIndex,s=i.items,a=i.environment,l=A(i,ve);e.useEffect((function(){o||ye((function(){return t(L({highlightedIndex:r,highlightedItem:s[r],resultCount:s.length},l))}),a.document)}),n)}var Me=te;function Ae(e,t,n){var i;return void 0===n&&(n=!0),L({isOpen:!1,highlightedIndex:-1},(null==(i=e.items)?void 0:i.length)&&t>=0&&L({selectedItem:e.items[t],isOpen:Se(e,"isOpen"),highlightedIndex:Se(e,"highlightedIndex")},n&&{inputValue:e.itemToString(e.items[t])}))}W.array.isRequired,W.func,W.func,W.func,W.number,W.number,W.number,W.bool,W.bool,W.bool,W.any,W.any,W.any,W.string,W.string,W.string,W.func,W.string,W.func,W.func,W.func,W.func,W.func,W.shape({addEventListener:W.func,removeEventListener:W.func,document:W.shape({getElementById:W.func,activeElement:W.any,body:W.any})}),J(J({},Ee),{getA11yStatusMessage:function(e){var t=e.isOpen,n=e.resultCount,i=e.previousResultCount;return t?n?n!==i?"".concat(n," result").concat(1===n?" is":"s are"," available, use up and down arrow keys to navigate. Press Enter or Space Bar keys to select."):"":"No results are available.":""}});var Le=0,Ve=1,De=2,Ne=3,Re=4,Fe=5,Be=6,Ke=7,He=8,ze=9,je=10,Ue=11,We=12,$e=13,qe=14,Ye=15,Xe=16,Qe=17,Ze=18,Ge=19,Je=20,et=21,tt=22,nt=Object.freeze({__proto__:null,InputKeyDownArrowDown:Le,InputKeyDownArrowUp:Ve,InputKeyDownEscape:De,InputKeyDownHome:Ne,InputKeyDownEnd:Re,InputKeyDownPageUp:Fe,InputKeyDownPageDown:Be,InputKeyDownEnter:Ke,InputChange:He,InputBlur:ze,InputFocus:je,MenuMouseLeave:Ue,ItemMouseMove:We,ItemClick:$e,ToggleButtonClick:qe,FunctionToggleMenu:Ye,FunctionOpenMenu:Xe,FunctionCloseMenu:Qe,FunctionSetHighlightedIndex:Ze,FunctionSelectItem:Ge,FunctionSetInputValue:Je,FunctionReset:et,ControlledPropUpdatedSelectedItem:tt});function it(e){var t=function(e){var t=Oe(e,"selectedItem"),n=Oe(e,"isOpen"),i=Oe(e,"highlightedIndex"),o=Oe(e,"inputValue");return{highlightedIndex:i<0&&t&&n?e.items.indexOf(t):i,isOpen:n,selectedItem:t,inputValue:o}}(e),n=t.selectedItem,i=t.inputValue;return""===i&&n&&void 0===e.defaultInputValue&&void 0===e.initialInputValue&&void 0===e.inputValue&&(i=e.itemToString(n)),L({},t,{inputValue:i})}W.array.isRequired,W.func,W.func,W.func,W.func,W.number,W.number,W.number,W.bool,W.bool,W.bool,W.any,W.any,W.any,W.string,W.string,W.string,W.string,W.string,W.string,W.func,W.string,W.string,W.func,W.func,W.func,W.func,W.func,W.func,W.shape({addEventListener:W.func,removeEventListener:W.func,document:W.shape({getElementById:W.func,activeElement:W.any,body:W.any})});var ot=L({},Ee,{selectedItemChanged:function(e,t){return e!==t},getA11yStatusMessage:function(e){var t=e.isOpen,n=e.resultCount,i=e.previousResultCount;return t?n?n!==i?n+" result"+(1===n?" is":"s are")+" available, use up and down arrow keys to navigate. Press Enter key to select.":"":"No results are available.":""}});function rt(e,t){var n,i,o=t.type,r=t.props,s=t.altKey;switch(o){case $e:i={isOpen:Se(r,"isOpen"),highlightedIndex:Se(r,"highlightedIndex"),selectedItem:r.items[t.index],inputValue:r.itemToString(r.items[t.index])};break;case Le:i=e.isOpen?{highlightedIndex:ue(1,e.highlightedIndex,r.items.length,t.getItemNodeFromIndex,!0)}:{highlightedIndex:s&&null==e.selectedItem?-1:Pe(r,e,1,t.getItemNodeFromIndex),isOpen:r.items.length>=0};break;case Ve:i=e.isOpen?s?Ae(r,e.highlightedIndex):{highlightedIndex:ue(-1,e.highlightedIndex,r.items.length,t.getItemNodeFromIndex,!0)}:{highlightedIndex:Pe(r,e,-1,t.getItemNodeFromIndex),isOpen:r.items.length>=0};break;case Ke:i=Ae(r,e.highlightedIndex);break;case De:i=L({isOpen:!1,highlightedIndex:-1},!e.isOpen&&{selectedItem:null,inputValue:""});break;case Fe:i={highlightedIndex:ue(-10,e.highlightedIndex,r.items.length,t.getItemNodeFromIndex,!1)};break;case Be:i={highlightedIndex:ue(10,e.highlightedIndex,r.items.length,t.getItemNodeFromIndex,!1)};break;case Ne:i={highlightedIndex:ce(1,0,r.items.length,t.getItemNodeFromIndex,!1)};break;case Re:i={highlightedIndex:ce(-1,r.items.length-1,r.items.length,t.getItemNodeFromIndex,!1)};break;case ze:i=L({isOpen:!1,highlightedIndex:-1},e.highlightedIndex>=0&&(null==(n=r.items)?void 0:n.length)&&t.selectItem&&{selectedItem:r.items[e.highlightedIndex],inputValue:r.itemToString(r.items[e.highlightedIndex])});break;case He:i={isOpen:!0,highlightedIndex:Se(r,"highlightedIndex"),inputValue:t.inputValue};break;case je:i={isOpen:!0,highlightedIndex:Pe(r,e,0)};break;case Ge:i={selectedItem:t.selectedItem,inputValue:r.itemToString(t.selectedItem)};break;case tt:i={inputValue:t.inputValue};break;default:return function(e,t,n){var i,o=t.type,r=t.props;switch(o){case n.ItemMouseMove:i={highlightedIndex:t.disabled?-1:t.index};break;case n.MenuMouseLeave:i={highlightedIndex:-1};break;case n.ToggleButtonClick:case n.FunctionToggleMenu:i={isOpen:!e.isOpen,highlightedIndex:e.isOpen?-1:Pe(r,e,0)};break;case n.FunctionOpenMenu:i={isOpen:!0,highlightedIndex:Pe(r,e,0)};break;case n.FunctionCloseMenu:i={isOpen:!1};break;case n.FunctionSetHighlightedIndex:i={highlightedIndex:t.highlightedIndex};break;case n.FunctionSetInputValue:i={inputValue:t.inputValue};break;case n.FunctionReset:i={highlightedIndex:Se(r,"highlightedIndex"),isOpen:Se(r,"isOpen"),selectedItem:Se(r,"selectedItem"),inputValue:Se(r,"inputValue")};break;default:throw new Error("Reducer called without proper action type.")}return L({},e,i)}(e,t,nt)}return L({},e,i)}var st=["onMouseLeave","refKey","ref"],at=["item","index","refKey","ref","onMouseMove","onMouseDown","onClick","onPress","disabled"],lt=["onClick","onPress","refKey","ref"],ut=["onKeyDown","onChange","onInput","onFocus","onBlur","onChangeText","refKey","ref"];function ct(t){void 0===t&&(t={});var n=L({},ot,t),i=n.initialIsOpen,o=n.defaultIsOpen,r=n.items,s=n.scrollIntoView,a=n.environment,l=n.getA11yStatusMessage,u=n.getA11ySelectionMessage,c=n.itemToString,d=function(t,n,i){var o=e.useRef(),r=Te(t,n,i),s=r[0],a=r[1];return e.useEffect((function(){ae(i,"selectedItem")&&(i.selectedItemChanged(o.current,i.selectedItem)&&a({type:tt,inputValue:i.itemToString(i.selectedItem)}),o.current=s.selectedItem===o.current?i.selectedItem:s.selectedItem)}),[s.selectedItem,i.selectedItem]),[se(s,i),a]}(rt,it(n),n),p=d[0],h=d[1],m=p.isOpen,v=p.highlightedIndex,f=p.selectedItem,g=p.inputValue,y=e.useRef(null),b=e.useRef({}),I=e.useRef(null),x=e.useRef(null),C=e.useRef(!0),w=Ie(n),T=e.useRef(),E=we({state:p,props:n}),S=e.useCallback((function(e){return b.current[w.getItemId(e)]}),[w]);ke(l,[m,v,g,r],L({isInitialMount:C.current,previousResultCount:T.current,items:r,environment:a,itemToString:c},p)),ke(u,[f],L({isInitialMount:C.current,previousResultCount:T.current,items:r,environment:a,itemToString:c},p));var O=function(t){var n=t.highlightedIndex,i=t.isOpen,o=t.itemRefs,r=t.getItemNodeFromIndex,s=t.menuElement,a=t.scrollIntoView,l=e.useRef(!0);return be((function(){n<0||!i||!Object.keys(o.current).length||(!1===l.current?l.current=!0:a(r(n),s))}),[n]),l}({menuElement:y.current,highlightedIndex:v,isOpen:m,itemRefs:b,scrollIntoView:s,getItemNodeFromIndex:S});Me({isInitialMount:C.current,props:n,state:p}),e.useEffect((function(){(i||o||m)&&I.current&&I.current.focus()}),[]),e.useEffect((function(){C.current||(T.current=r.length)}));var P=function(t,n,i,o){var r=e.useRef({isMouseDown:!1,isTouchMove:!1});return e.useEffect((function(){if(null!=(null==i?void 0:i.addEventListener)){var e=function(){r.current.isMouseDown=!0},s=function(e){r.current.isMouseDown=!1,t&&!de(e.target,n.map((function(e){return e.current})),i)&&o()},a=function(){r.current.isTouchMove=!1},l=function(){r.current.isTouchMove=!0},u=function(e){!t||r.current.isTouchMove||de(e.target,n.map((function(e){return e.current})),i,!1)||o()};return i.addEventListener("mousedown",e),i.addEventListener("mouseup",s),i.addEventListener("touchstart",a),i.addEventListener("touchmove",l),i.addEventListener("touchend",u),function(){i.removeEventListener("mousedown",e),i.removeEventListener("mouseup",s),i.removeEventListener("touchstart",a),i.removeEventListener("touchmove",l),i.removeEventListener("touchend",u)}}}),[t,i]),r}(m,[I,y,x],a,(function(){h({type:ze,selectItem:!1})})),_=_e();e.useEffect((function(){return C.current=!1,function(){C.current=!0}}),[]),e.useEffect((function(){var e;if(m){if((null==(e=a.document)?void 0:e.activeElement)!==I.current){var t;null==I||null==(t=I.current)||t.focus()}}else b.current={}}),[m,a]);var k=e.useMemo((function(){return{ArrowDown:function(e){e.preventDefault(),h({type:Le,altKey:e.altKey,getItemNodeFromIndex:S})},ArrowUp:function(e){e.preventDefault(),h({type:Ve,altKey:e.altKey,getItemNodeFromIndex:S})},Home:function(e){E.current.state.isOpen&&(e.preventDefault(),h({type:Ne,getItemNodeFromIndex:S}))},End:function(e){E.current.state.isOpen&&(e.preventDefault(),h({type:Re,getItemNodeFromIndex:S}))},Escape:function(e){var t=E.current.state;(t.isOpen||t.inputValue||t.selectedItem||t.highlightedIndex>-1)&&(e.preventDefault(),h({type:De}))},Enter:function(e){E.current.state.isOpen&&229!==e.which&&(e.preventDefault(),h({type:Ke,getItemNodeFromIndex:S}))},PageUp:function(e){E.current.state.isOpen&&(e.preventDefault(),h({type:Fe,getItemNodeFromIndex:S}))},PageDown:function(e){E.current.state.isOpen&&(e.preventDefault(),h({type:Be,getItemNodeFromIndex:S}))}}}),[h,E,S]),M=e.useCallback((function(e){return L({id:w.labelId,htmlFor:w.inputId},e)}),[w]),V=e.useCallback((function(e,t){var n,i=void 0===e?{}:e,o=i.onMouseLeave,r=i.refKey,s=void 0===r?"ref":r,a=i.ref,l=A(i,st);return(void 0===t?{}:t).suppressRefError,L(((n={})[s]=re(a,(function(e){y.current=e})),n.id=w.menuId,n.role="listbox",n["aria-labelledby"]=l&&l["aria-label"]?void 0:""+w.labelId,n.onMouseLeave=oe(o,(function(){h({type:Ue})})),n),l)}),[h,_,w]),D=e.useCallback((function(e){var t,n,i=void 0===e?{}:e,o=i.item,r=i.index,s=i.refKey,a=void 0===s?"ref":s,l=i.ref,u=i.onMouseMove,c=i.onMouseDown,d=i.onClick;i.onPress;var p=i.disabled,m=A(i,at),v=E.current,f=v.props,g=v.state,y=xe(o,r,f.items,"Pass either item or index to getItemProps!")[1],I=d;return L(((t={})[a]=re(l,(function(e){e&&(b.current[w.getItemId(y)]=e)})),t.disabled=p,t.role="option",t["aria-selected"]=""+(y===g.highlightedIndex),t.id=w.getItemId(y),t),!p&&((n={}).onClick=oe(I,(function(){h({type:$e,index:y})})),n),{onMouseMove:oe(u,(function(){y!==g.highlightedIndex&&(O.current=!1,h({type:We,index:y,disabled:p}))})),onMouseDown:oe(c,(function(e){return e.preventDefault()}))},m)}),[h,E,O,w]),N=e.useCallback((function(e){var t,n=void 0===e?{}:e,i=n.onClick;n.onPress;var o=n.refKey,r=void 0===o?"ref":o,s=n.ref,a=A(n,lt),l=E.current.state;return L(((t={})[r]=re(s,(function(e){x.current=e})),t["aria-controls"]=w.menuId,t["aria-expanded"]=l.isOpen,t.id=w.toggleButtonId,t.tabIndex=-1,t),!a.disabled&&L({},{onClick:oe(i,(function(){h({type:qe})}))}),a)}),[h,E,w]),R=e.useCallback((function(e,t){var n,i=void 0===e?{}:e,o=i.onKeyDown,r=i.onChange,s=i.onInput,l=i.onFocus,u=i.onBlur;i.onChangeText;var c=i.refKey,d=void 0===c?"ref":c,p=i.ref,m=A(i,ut);(void 0===t?{}:t).suppressRefError;var v,f=E.current.state,g={};m.disabled||((v={}).onChange=oe(r,s,(function(e){h({type:He,inputValue:e.target.value})})),v.onKeyDown=oe(o,(function(e){var t=le(e);t&&k[t]&&k[t](e)})),v.onBlur=oe(u,(function(e){if(f.isOpen&&!P.current.isMouseDown){var t=null===e.relatedTarget&&a.document.activeElement!==a.document.body;h({type:ze,selectItem:!t})}})),v.onFocus=oe(l,(function(){f.isOpen||h({type:je})})),g=v);return L(((n={})[d]=re(p,(function(e){I.current=e})),n["aria-activedescendant"]=f.isOpen&&f.highlightedIndex>-1?w.getItemId(f.highlightedIndex):"",n["aria-autocomplete"]="list",n["aria-controls"]=w.menuId,n["aria-expanded"]=f.isOpen,n["aria-labelledby"]=m&&m["aria-label"]?void 0:""+w.labelId,n.autoComplete="off",n.id=w.inputId,n.role="combobox",n.value=f.inputValue,n),g,m)}),[_,E,w,k,h,P,a]),F=e.useCallback((function(){h({type:Ye})}),[h]),B=e.useCallback((function(){h({type:Qe})}),[h]),K=e.useCallback((function(){h({type:Xe})}),[h]),H=e.useCallback((function(e){h({type:Ze,highlightedIndex:e})}),[h]),z=e.useCallback((function(e){h({type:Ge,selectedItem:e})}),[h]);return{getItemProps:D,getLabelProps:M,getMenuProps:V,getInputProps:R,getToggleButtonProps:N,toggleMenu:F,openMenu:K,closeMenu:B,setHighlightedIndex:H,setInputValue:e.useCallback((function(e){h({type:Je,inputValue:e})}),[h]),selectItem:z,reset:e.useCallback((function(){h({type:et})}),[h]),highlightedIndex:v,isOpen:m,selectedItem:f,inputValue:g}}ct.stateChangeTypes=nt;var dt={activeIndex:-1,selectedItems:[]};function pt(e,t){return Oe(e,t,dt)}function ht(e,t){return Se(e,t,dt)}function mt(e){if(e.shiftKey||e.metaKey||e.ctrlKey||e.altKey)return!1;var t=e.target;return!(t instanceof HTMLInputElement&&""!==t.value)||0===t.selectionStart&&0===t.selectionEnd}W.array,W.array,W.array,W.func,W.func,W.func,W.number,W.number,W.number,W.func,W.func,W.string,W.string,W.shape({addEventListener:W.func,removeEventListener:W.func,document:W.shape({getElementById:W.func,activeElement:W.any,body:W.any})});var vt={itemToString:Ee.itemToString,stateReducer:Ee.stateReducer,environment:Ee.environment,getA11yRemovalMessage:function(e){var t=e.removedSelectedItem;return(0,e.itemToString)(t)+" has been removed."},keyNavigationNext:"ArrowRight",keyNavigationPrevious:"ArrowLeft"},ft=0,gt=1,yt=2,bt=3,It=4,xt=5,Ct=6,wt=7,Tt=8,Et=9,St=10,Ot=11,Pt=12,_t=Object.freeze({__proto__:null,SelectedItemClick:ft,SelectedItemKeyDownDelete:gt,SelectedItemKeyDownBackspace:yt,SelectedItemKeyDownNavigationNext:bt,SelectedItemKeyDownNavigationPrevious:It,DropdownKeyDownNavigationPrevious:xt,DropdownKeyDownBackspace:Ct,DropdownClick:wt,FunctionAddSelectedItem:Tt,FunctionRemoveSelectedItem:Et,FunctionSetSelectedItems:St,FunctionSetActiveIndex:Ot,FunctionReset:Pt});function kt(e,t){var n,i=t.type,o=t.index,r=t.props,s=t.selectedItem,a=e.activeIndex,l=e.selectedItems;switch(i){case ft:n={activeIndex:o};break;case It:n={activeIndex:a-1<0?0:a-1};break;case bt:n={activeIndex:a+1>=l.length?-1:a+1};break;case yt:case gt:if(a<0)break;var u=a;1===l.length?u=-1:a===l.length-1&&(u=l.length-2),n=L({selectedItems:[].concat(l.slice(0,a),l.slice(a+1))},{activeIndex:u});break;case xt:n={activeIndex:l.length-1};break;case Ct:n={selectedItems:l.slice(0,l.length-1)};break;case Tt:n={selectedItems:[].concat(l,[s])};break;case wt:n={activeIndex:-1};break;case Et:var c=a,d=l.indexOf(s);if(d<0)break;1===l.length?c=-1:d===l.length-1&&(c=l.length-2),n={selectedItems:[].concat(l.slice(0,d),l.slice(d+1)),activeIndex:c};break;case St:n={selectedItems:t.selectedItems};break;case Ot:n={activeIndex:t.activeIndex};break;case Pt:n={activeIndex:ht(r,"activeIndex"),selectedItems:ht(r,"selectedItems")};break;default:throw new Error("Reducer called without proper action type.")}return L({},e,n)}var Mt=["refKey","ref","onClick","onKeyDown","selectedItem","index"],At=["refKey","ref","onKeyDown","onClick","preventKeyAction"];function Lt(t){void 0===t&&(t={});var n=L({},vt,t),i=n.getA11yRemovalMessage,o=n.itemToString,r=n.environment,s=n.keyNavigationNext,a=n.keyNavigationPrevious,l=function(e,t,n){var i=Te(e,t,n),o=i[0],r=i[1];return[se(o,n),r]}(kt,function(e){return{activeIndex:pt(e,"activeIndex"),selectedItems:pt(e,"selectedItems")}}(n),n),u=l[0],c=l[1],d=u.activeIndex,p=u.selectedItems,h=e.useRef(!0),m=e.useRef(null),v=e.useRef(p),f=e.useRef();f.current=[];var g=we({state:u,props:n});e.useEffect((function(){if(!h.current){if(p.length<v.current.length){var e=v.current.find((function(e){return p.indexOf(e)<0}));he(i({itemToString:o,resultCount:p.length,removedSelectedItem:e,activeIndex:d,activeSelectedItem:p[d]}),r.document)}v.current=p}}),[p.length]),e.useEffect((function(){h.current||(-1===d&&m.current?m.current.focus():f.current[d]&&f.current[d].focus())}),[d]),Me({isInitialMount:h.current,props:n,state:u});var y=_e();e.useEffect((function(){return h.current=!1,function(){h.current=!0}}),[]);var b=e.useMemo((function(){var e;return(e={})[a]=function(){c({type:It})},e[s]=function(){c({type:bt})},e.Delete=function(){c({type:gt})},e.Backspace=function(){c({type:yt})},e}),[c,s,a]),I=e.useMemo((function(){var e;return(e={})[a]=function(e){mt(e)&&c({type:xt})},e.Backspace=function(e){mt(e)&&c({type:Ct})},e}),[c,a]);return{getSelectedItemProps:e.useCallback((function(e){var t,n=void 0===e?{}:e,i=n.refKey,o=void 0===i?"ref":i,r=n.ref,s=n.onClick,a=n.onKeyDown,l=n.selectedItem,u=n.index,d=A(n,Mt),p=g.current.state,h=xe(l,u,p.selectedItems,"Pass either item or index to getSelectedItemProps!")[1],m=h>-1&&h===p.activeIndex;return L(((t={})[o]=re(r,(function(e){e&&f.current.push(e)})),t.tabIndex=m?0:-1,t.onClick=oe(s,(function(){c({type:ft,index:h})})),t.onKeyDown=oe(a,(function(e){var t=le(e);t&&b[t]&&b[t](e)})),t),d)}),[c,g,b]),getDropdownProps:e.useCallback((function(e,t){var n,i=void 0===e?{}:e,o=i.refKey,r=void 0===o?"ref":o,s=i.ref,a=i.onKeyDown,l=i.onClick,u=i.preventKeyAction,d=void 0!==u&&u,p=A(i,At);(void 0===t?{}:t).suppressRefError;return L(((n={})[r]=re(s,(function(e){e&&(m.current=e)})),n),!d&&{onKeyDown:oe(a,(function(e){var t=le(e);t&&I[t]&&I[t](e)})),onClick:oe(l,(function(){c({type:wt})}))},p)}),[c,I,y]),addSelectedItem:e.useCallback((function(e){c({type:Tt,selectedItem:e})}),[c]),removeSelectedItem:e.useCallback((function(e){c({type:Et,selectedItem:e})}),[c]),setSelectedItems:e.useCallback((function(e){c({type:St,selectedItems:e})}),[c]),setActiveIndex:e.useCallback((function(e){c({type:Ot,activeIndex:e})}),[c]),reset:e.useCallback((function(){c({type:Pt})}),[c]),selectedItems:p,activeIndex:d}}function Vt(t,n,i){var o;const{getSelectedItemProps:r,getDropdownProps:s,removeSelectedItem:a,setActiveIndex:l,selectedItems:u,setSelectedItems:c,activeIndex:d,addSelectedItem:p}=Lt({selectedItems:null!==(o=t.currentId)&&void 0!==o?o:[],itemToString:e=>t.caption.get(e),getA11yRemovalMessage:e=>"".concat(e.itemToString(e.removedSelectedItem)," has been removed."),onSelectedItemsChange(e){let{selectedItems:n}=e;t.setValue(null!=n?n:[])},onStateChange(e){let{selectedItems:t,type:n}=e;switch(n){case Lt.stateChangeTypes.SelectedItemKeyDownBackspace:case Lt.stateChangeTypes.SelectedItemKeyDownDelete:case Lt.stateChangeTypes.DropdownKeyDownBackspace:case Lt.stateChangeTypes.FunctionRemoveSelectedItem:c(t)}}}),h=t.getOptions(),{isOpen:m,reset:v,getToggleButtonProps:f,getMenuProps:g,getInputProps:y,highlightedIndex:b,getItemProps:I,inputValue:x,setInputValue:C,closeMenu:w}=ct(function(t,n,i,o,r,s,a){return e.useMemo((()=>({items:i,selectedItem:null,inputId:null==a?void 0:a.inputId,labelId:null==a?void 0:a.labelId,onInputValueChange(e){let{inputValue:n}=e;t.options.setSearchTerm(n)},getA11yStatusMessage(e){let i=n.length>0?"".concat(s.a11ySelectedValue," ").concat(n.map((e=>t.caption.get(e))).join(","),". "):"";return e.resultCount?e.isOpen?(e.previousResultCount===e.resultCount&&e.highlightedItem||(i+="".concat(s.a11yOptionsAvailable," ").concat(e.resultCount,". ").concat(s.a11yInstructions)),i):i:s.a11yNoOption},itemToString:e=>t.caption.get(e),stateReducer(e,t){const{changes:n,type:o}=t;switch(o){case ct.stateChangeTypes.ControlledPropUpdatedSelectedItem:return{...n,inputValue:e.inputValue};case ct.stateChangeTypes.InputFocus:return{...n,isOpen:e.isOpen};case ct.stateChangeTypes.InputKeyDownEnter:case ct.stateChangeTypes.ItemClick:return{...n,...n.selectedItem&&{isOpen:!0,inputValue:"",highlightedIndex:i.indexOf(n.selectedItem)}};case ct.stateChangeTypes.InputKeyDownEscape:case ct.stateChangeTypes.FunctionCloseMenu:return{...n,...n.selectedItem&&{isOpen:!1,inputValue:"",highlightedIndex:i.indexOf(n.selectedItem)}};case ct.stateChangeTypes.InputBlur:return{...e,highlightedIndex:-1};default:return n}},onStateChange(e){let{type:t,selectedItem:i}=e;switch(t){case ct.stateChangeTypes.InputKeyDownEnter:case ct.stateChangeTypes.ItemClick:i&&!n.includes(i)?r([...n,i]):i&&o(i)}}})),[t,n,i,t.currentId,o,r,s.a11ySelectedValue,s.a11yOptionsAvailable,s.a11yNoOption,s.a11yInstructions])}(t,u,h,a,c,i,n));return t.onLeaveEvent=e.useCallback(w,[w]),{isOpen:m,reset:v,getToggleButtonProps:f,getMenuProps:g,getInputProps:y,highlightedIndex:b,getItemProps:I,inputValue:x,setInputValue:C,getSelectedItemProps:r,getDropdownProps:s,removeSelectedItem:a,setActiveIndex:l,selectedItems:u,items:h,setSelectedItems:c,activeIndex:d,addSelectedItem:p,toggleSelectedItem:e=>{const t=h[e];t&&(u.includes(t)?(a(t),C("")):(p(t),C("")))}}}function Dt(t){var n,i;const[o,r]=e.useState(!1),s=null!==(i=(n=e.useRef()).current)&&void 0!==i?i:n.current=function(e){let{setIsIntersecting:t}=e;return new IntersectionObserver((e=>{let[n]=e;t(n.isIntersecting)}))}({setIsIntersecting:r});return e.useEffect((()=>(t.current&&s.observe(t.current),()=>{s.disconnect()})),[s,t]),o}Lt.stateChangeTypes=_t;const Nt=30;function Rt(t){const{hasMoreItems:n,isInfinite:i,isOpen:o,loadMore:r,datasourceFilter:s,readOnly:a}=t,[l,u]=e.useState(!1),c=e.useCallback((()=>{r&&r()}),[r]),[d]=function(t){const{setPage:n,hasMoreItems:i,isInfinite:o}=t,[r,s]=e.useState(0),a=e.useRef(null),l=Dt(a),u=e.useCallback((e=>{Math.floor(e.target.scrollHeight-Nt-e.target.scrollTop)<=Math.floor(e.target.clientHeight)+2&&i&&n&&n((e=>e+1))}),[i,n]),c=e.useCallback((()=>{l&&o&&i&&r<=0&&a.current&&s(a.current.clientHeight-Nt)}),[o,i,r,l]);return e.useLayoutEffect((()=>{setTimeout((()=>c()),100)}),[c]),[u,r,a]}({hasMoreItems:n,isInfinite:i,setPage:c});return e.useEffect((()=>{!1===l&&!0===i&&!0===o&&(u(!0),c())}),[l,i,o,c]),e.useEffect((()=>{u(!1)}),[a,s]),{onScroll:d}}const Ft=t=>{let{className:n,children:i}=t;return e.createElement(Bt,{className:d("mx-validation-message",n),bootstrapStyle:"danger",role:"alert"},i)},Bt=t=>{let{className:n,bootstrapStyle:i,children:o,role:r}=t;return e.Children.count(o)>0?e.createElement("div",{className:d("alert alert-".concat(i),n),role:r},o):null};function Kt(t){let{size:n="medium",withMargins:i=!1}=t;return e.createElement("div",{className:d("widget-combobox-spinner",{"widget-combobox-spinner-margin":i})},e.createElement("div",{className:d("widget-combobox-spinner-loader",{"widget-combobox-spinner-loader-small":"small"===n})}))}Bt.displayName="Alert";const Ht=e.forwardRef(((t,n)=>{const{isOpen:i,readOnly:o,readOnlyStyle:r,getToggleButtonProps:s,validation:a,children:l,isLoading:u}=t,{id:c,onClick:p}=s();return e.createElement(e.Fragment,null,e.createElement("div",{ref:n,tabIndex:-1,className:d("widget-combobox-input-container",{"widget-combobox-input-container-active":i,"widget-combobox-input-container-disabled":o,"form-control-static":o&&"text"===r,"form-control":!o||"text"!==r}),id:c,onClick:p},l,o&&"text"===r?null:u?e.createElement("div",{className:"widget-combobox-down-arrow"},e.createElement(Kt,{size:"small"})):e.createElement("div",{className:"widget-combobox-down-arrow"},e.createElement(k,{isOpen:i}))),a&&e.createElement(Ft,null,a))}));function zt(){return e.createElement("div",{className:"form-control widget-combobox-placeholder"},e.createElement("div",{className:"widget-combobox-placeholder-down-arrow"},e.createElement(k,null)))}function jt(t){return e.createElement("li",{className:"widget-combobox-item widget-combobox-no-options",role:"option"},t.children)}function Ut(t){var n;return e.createElement("div",{className:d("widget-combobox-placeholder-".concat(null!==(n=t.type)&&void 0!==n?n:"text"),{"widget-combobox-placeholder-empty":t.isEmpty})},t.children)}function Wt(t,n){const[i,o]=e.useState(),r=e.useCallback((()=>{o((e=>{const n=null==t?void 0:t.getBoundingClientRect();return o=n,(i=e)&&o&&i.height===o.height&&i.width===o.width&&i.bottom===o.bottom&&i.top===o.top&&i.left===o.left&&i.right===o.right?e:n;var i,o}))}),[t]);var s;return s=n?r:void 0,e.useEffect((()=>s?function(e){let t;const n=()=>{t=window.requestAnimationFrame((()=>{e(),n()}))},i=()=>window.cancelAnimationFrame(t);return n(),i}(s):void 0),[s]),i}const $t=(e,t)=>{let n=null;const i=()=>{null!==n&&(clearTimeout(n),n=null)};return[function(){for(var o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];i(),n=setTimeout((()=>e(...r)),t)},i]};function qt(e,t){const{height:n}=t,i=window.innerHeight-e.bottom,o=e.top-n<0?e.top-n:0;return i<n?{bottom:window.innerHeight-e.top+o,left:e.left}:{top:e.bottom,left:e.left}}function Yt(e){e.stopPropagation()}function Xt(e){e.preventDefault(),e.stopPropagation()}function Qt(t){const{alwaysOpen:n,children:i,getMenuProps:o,highlightedIndex:r,isEmpty:s,isLoading:a,isOpen:l,lazyLoading:u,loader:c,menuFooterContent:p,menuHeaderContent:h,noOptionsText:m,onOptionClick:v,onScroll:f}=t,[g,y]=function(t){var n,i,o,r;const s=e.useRef(null),[a,l]=e.useState({visibility:"hidden",position:"fixed"}),[u,c]=e.useMemo((()=>$t(l,32)),[l]),d=null!==(n=null===(i=s.current)||void 0===i?void 0:i.offsetHeight)&&void 0!==n?n:0,p=Wt(null!==(o=null===(r=s.current)||void 0===r?void 0:r.parentElement)&&void 0!==o?o:null,t);return e.useEffect((()=>{if(void 0!==p&&null!==s.current&&t)return u({visibility:"visible",position:"fixed",width:p.width,...qt(p,s.current.getBoundingClientRect())}),c}),[d,t,p,u,c]),[s,a]}(l);return e.createElement("div",{ref:g,className:d("widget-combobox-menu",{"widget-combobox-menu-hidden":!l}),style:n?{display:"block",visibility:"visible",position:"relative"}:y},h&&e.createElement("div",{className:"widget-combobox-menu-header widget-combobox-item",onMouseDown:Yt,tabIndex:0},h),e.createElement("ul",{className:d("widget-combobox-menu-list",{"widget-combobox-menu-highlighted":(null!=r?r:-1)>=0,"widget-combobox-menu-lazy-scroll":u&&!s}),...null==o?void 0:o({onClick:v,onMouseDown:Xt,onScroll:f},{suppressRefError:!0})},l?s&&!a?e.createElement(jt,null,m):i:null,c),p&&e.createElement("div",{tabIndex:0,className:"widget-combobox-menu-footer",onMouseDown:Yt},p))}function Zt(t){const{children:n,isSelected:i,isHighlighted:o,item:r,getItemProps:s,index:a}=t;return e.createElement("li",{className:d("widget-combobox-item",{"widget-combobox-item-selected":i,"widget-combobox-item-highlighted":o}),...null==s?void 0:s({index:a,item:r}),"aria-selected":i},n)}function Gt(t){let{withCheckbox:n=!1}=t;return e.createElement("div",{className:"widget-combobox-skeleton"},n&&e.createElement("span",{className:"widget-combobox-skeleton-loader widget-combobox-skeleton-loader-small"}),e.createElement("span",{className:"widget-combobox-skeleton-loader"}))}function Jt(t){const{isEmpty:n,isLoading:i,isOpen:o,lazyLoading:r,loadingType:s,withCheckbox:a}=t;return o&&r&&i?"skeleton"===s?e.createElement(e.Fragment,null,Array.from({length:T}).map(((t,n)=>e.createElement(Gt,{withCheckbox:a,key:n})))):e.createElement(Kt,{withMargins:n}):null}function en(t){let{isOpen:n,getMenuProps:i,getItemProps:o,highlightedIndex:r,selector:s,selectableItems:a,noOptionsText:l,inputId:u,menuHeaderContent:c,menuFooterContent:d,onOptionClick:p,isLoading:h,lazyLoading:m,onScroll:v}=t;return e.createElement(Qt,{getMenuProps:i,highlightedIndex:r,isEmpty:a.length<=0,isLoading:h,isOpen:n,lazyLoading:m,loader:e.createElement(Jt,{isEmpty:0===a.length,isLoading:h,isOpen:n,lazyLoading:m,loadingType:s.loadingType,withCheckbox:"checkbox"===s.selectionMethod}),menuFooterContent:d,menuHeaderContent:c,noOptionsText:l,onOptionClick:p,onScroll:m?v:void 0},n&&a.map(((t,n)=>{var i;const a=r===n,l=null===(i=s.currentId)||void 0===i?void 0:i.includes(t);return e.createElement(Zt,{key:t,isHighlighted:a,isSelected:l,item:t,getItemProps:o,index:n},"checkbox"===s.selectionMethod&&e.createElement(M,{checked:l,id:"".concat(u,"_").concat(t)}),s.caption.render(t,"options","".concat(u,"_").concat(t)))})))}function tn(t){let{id:n,value:i,onChange:o}=t;const r=e.useRef(null);return e.useEffect((()=>{r.current&&("all"===i||"none"===i?r.current.indeterminate=!1:"some"===i&&(r.current.indeterminate=!0))}),[i]),e.createElement("input",{id:n,type:"checkbox",className:"three-state-checkbox",ref:r,checked:"none"!==i,onChange:o})}function nn(t){let{id:n,ariaLabel:i,value:o,onChange:r}=t;return e.createElement(e.Fragment,null,e.createElement("span",{className:d("widget-combobox-menu-header-select-all-button","widget-combobox-icon-container")},e.createElement(tn,{value:o,id:n,onChange:r})),i?e.createElement(E,{onClick:()=>{},htmlFor:n},i):void 0)}function on(t){var n,i,o;let{selector:r,tabIndex:s,a11yConfig:a,menuFooterContent:l,ariaRequired:u,...c}=t;const{isOpen:p,getToggleButtonProps:h,getMenuProps:m,getInputProps:v,highlightedIndex:f,getItemProps:g,getSelectedItemProps:y,getDropdownProps:b,removeSelectedItem:I,setActiveIndex:x,selectedItems:C,items:w,setSelectedItems:T,toggleSelectedItem:E}=Vt(r,c,a.a11yStatusMessage),S=e.useRef(null),O="boxes"===r.selectedItemsStyle,P=r.isOptionsSelected(),k=e.useMemo((()=>function(e,t){return 0===t.length?e.caption.emptyCaption:"text"!==e.selectedItemsStyle||"yes"===e.customContentType||"rowclick"===e.selectionMethod?"":t.map((t=>e.caption.get(t))).join(", ")}(r,C)),[r,C]),M=null!==(n=r.lazyLoading)&&void 0!==n&&n,{onScroll:A}=Rt({hasMoreItems:null!==(i=r.options.hasMore)&&void 0!==i&&i,isInfinite:M,isOpen:p,loadMore:()=>{r.options.loadMore&&r.options.loadMore()},readOnly:r.readOnly});return e.createElement(e.Fragment,null,e.createElement(Ht,{isOpen:p,readOnly:r.readOnly,readOnlyStyle:c.readOnlyStyle,getToggleButtonProps:h,validation:r.validation,isLoading:M&&r.options.isLoading},e.createElement("div",{className:d("widget-combobox-selected-items","widget-combobox-".concat(r.selectedItemsStyle))},O&&C.map(((t,n)=>{var i;return e.createElement("div",{className:"widget-combobox-selected-item",key:t,...y({selectedItem:t,index:n})},r.caption.render(t,"label"),!r.readOnly&&e.createElement("span",{className:"icon widget-combobox-clear-button","aria-label":null===(i=a.ariaLabels)||void 0===i?void 0:i.removeSelection,role:"button",onClick:e=>{e.stopPropagation(),I(t)}},e.createElement(_,{size:10})))})),e.createElement("input",{className:d("widget-combobox-input",{"widget-combobox-input-nofilter":"none"===r.options.filterType}),tabIndex:s,placeholder:" ",...v({...b({preventKeyAction:p},{suppressRefError:!0}),ref:S,onKeyDown:e=>{var t,n;("Backspace"===e.key&&0===(null===(t=S.current)||void 0===t?void 0:t.selectionStart)||"ArrowLeft"===e.key&&O&&0===(null===(n=S.current)||void 0===n?void 0:n.selectionStart))&&x(C.length-1)," "===e.key&&f>=0&&(E(f),e.preventDefault(),e.stopPropagation())},disabled:r.readOnly,readOnly:"none"===r.options.filterType,"aria-required":u.value})}),e.createElement(Ut,{isEmpty:C.length<=0},k)),!r.readOnly&&r.clearable&&null!==r.currentId&&r.currentId.length>0&&e.createElement("button",{tabIndex:s,className:"widget-combobox-clear-button","aria-label":null===(o=a.ariaLabels)||void 0===o?void 0:o.clearSelection,onClick:e=>{var t;e.stopPropagation(),null===(t=S.current)||void 0===t||t.focus(),C.length>0&&T([])}},e.createElement(_,null))),e.createElement(en,{menuHeaderContent:r.selectAllButton?e.createElement(nn,{value:P,id:"".concat(c.inputId,"-select-all-button"),ariaLabel:a.ariaLabels.selectAll,onChange:()=>{T("all"===P?[]:r.options.getAll())}}):void 0,menuFooterContent:l,inputId:c.inputId,selector:r,isOpen:p,highlightedIndex:f,selectableItems:w,getItemProps:g,getMenuProps:m,selectedItems:C,noOptionsText:c.noOptionsText,onOptionClick:()=>{var e;null===(e=S.current)||void 0===e||e.focus()},isLoading:r.options.isLoading,lazyLoading:M,onScroll:A}))}function rn(t){let{isOpen:n,selector:i,highlightedIndex:o,getMenuProps:r,getItemProps:s,noOptionsText:a,alwaysOpen:l,menuFooterContent:u,isLoading:c,lazyLoading:d,onScroll:p}=t;const h=i.options.getAll();return e.createElement(Qt,{alwaysOpen:l,getMenuProps:r,isEmpty:(null==h?void 0:h.length)<=0,isLoading:c,isOpen:n,lazyLoading:d,loader:e.createElement(Jt,{isLoading:c,isOpen:n,lazyLoading:d,loadingType:i.loadingType,withCheckbox:!1,isEmpty:0===h.length}),menuFooterContent:u,noOptionsText:a,onScroll:d?p:void 0},n&&h.map(((t,n)=>e.createElement(Zt,{key:t,isHighlighted:!l&&o===n,isSelected:i.currentId===t,item:t,getItemProps:s,index:n},i.caption.render(t,"options")))))}function sn(t){var n,i,o;let{selector:r,tabIndex:s=0,a11yConfig:a,keepMenuOpen:l,menuFooterContent:u,ariaRequired:c,...p}=t;const{getInputProps:h,getToggleButtonProps:m,getItemProps:v,selectedItem:f,getMenuProps:g,reset:y,isOpen:b,highlightedIndex:I}=function(t){var n;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;const{inputId:r,labelId:s}=i,a=e.useMemo((()=>({items:[],itemToString:e=>t.caption.get(e),onSelectedItemChange(e){let{selectedItem:n}=e;t.setValue(null!=n?n:null)},onInputValueChange(e){let{inputValue:n}=e;t.options.setSearchTerm(n)},getA11yStatusMessage(e){const n=t.caption.get(t.currentId);let i=n?t.currentId?"".concat(o.a11ySelectedValue," ").concat(n,". "):"No options selected.":"";return e.isOpen?e.resultCount&&e.resultCount>0?(i+="".concat(o.a11yOptionsAvailable," ").concat(e.resultCount,". ").concat(o.a11yInstructions),i):o.a11yNoOption:i},defaultHighlightedIndex:0,selectedItem:null,initialInputValue:t.caption.get(t.currentId),stateReducer(e,n){const{changes:i,type:o}=n;switch(o){case ct.stateChangeTypes.ToggleButtonClick:return{...i,inputValue:e.isOpen&&t.currentId?t.caption.get(t.currentId):""};case ct.stateChangeTypes.ControlledPropUpdatedSelectedItem:return{...i,inputValue:i.inputValue===t.caption.emptyCaption?"":t.caption.get(t.currentId)};case ct.stateChangeTypes.InputFocus:return{...i,isOpen:e.isOpen,inputValue:"",highlightedIndex:i.selectedItem?-1:this.defaultHighlightedIndex};case ct.stateChangeTypes.InputKeyDownEscape:case ct.stateChangeTypes.FunctionCloseMenu:return{...i,isOpen:!1,inputValue:i.selectedItem||t.currentId?t.caption.get(t.currentId):""};case ct.stateChangeTypes.InputBlur:return e;default:return{...i}}},inputId:r,labelId:s})),[t,r,s,o.a11ySelectedValue,o.a11yOptionsAvailable,o.a11yNoOption,o.a11yInstructions]),l=ct({...a,items:null!==(n=t.options.getAll())&&void 0!==n?n:[],selectedItem:t.currentId}),{closeMenu:u}=l;return t.onLeaveEvent=e.useCallback(u,[u]),l}(r,p,a.a11yStatusMessage),x=e.useRef(null),C=null!==(n=r.lazyLoading)&&void 0!==n&&n,{onScroll:w}=Rt({hasMoreItems:null!==(i=r.options.hasMore)&&void 0!==i&&i,isInfinite:C,isOpen:b,loadMore:()=>{r.options.loadMore&&r.options.loadMore()},datasourceFilter:r.options.datasourceFilter,readOnly:r.readOnly}),T=e.useMemo((()=>r.caption.render(f,"label")),[f,r.status,r.caption,r.caption.emptyCaption,r.currentId,r.caption.formatter]);return e.createElement(e.Fragment,null,e.createElement(Ht,{isOpen:b||!0===l,readOnly:r.readOnly,readOnlyStyle:p.readOnlyStyle,getToggleButtonProps:m,validation:r.validation,isLoading:C&&r.options.isLoading},e.createElement("div",{className:d("widget-combobox-selected-items",{"widget-combobox-custom-content":"yes"===r.customContentType})},e.createElement("input",{className:d("widget-combobox-input",{"widget-combobox-input-nofilter":"none"===r.options.filterType}),tabIndex:s,...h({disabled:r.readOnly,readOnly:"none"===r.options.filterType,ref:x,"aria-required":c.value},{suppressRefError:!0}),placeholder:" "}),e.createElement(Ut,{isEmpty:!r.currentId||!r.caption.render(f,"label"),type:"yes"===r.customContentType?"custom":"text"},T)),(!r.readOnly&&r.clearable&&null!==r.currentId||"static"===r.selectorType&&null!==r.currentId&&!r.readOnly&&r.clearable&&"boolean"!==r.attributeType)&&e.createElement("button",{tabIndex:s,className:"widget-combobox-clear-button","aria-label":null===(o=a.ariaLabels)||void 0===o?void 0:o.clearSelection,onClick:e=>{var t;e.stopPropagation(),null===(t=x.current)||void 0===t||t.focus(),(f||"static"===r.selectorType)&&(r.setValue(null),y())}},e.createElement(_,null))),e.createElement(rn,{selector:r,selectedItem:f,getMenuProps:g,getItemProps:v,isOpen:b||!0===l,highlightedIndex:I,menuFooterContent:u,noOptionsText:p.noOptionsText,alwaysOpen:l,isLoading:r.options.isLoading,lazyLoading:C,onScroll:w}))}const an=e=>{e&&e.canExecute&&!e.isExecuting&&e.execute()};class ln{constructor(){_defineProperty(this,"ds",void 0),_defineProperty(this,"limit",0)}updateProps(e){this.limit=e.limit,this.ds=e}setLimit(e){var t,n;e!==(null===(t=this.ds)||void 0===t?void 0:t.limit)&&(null===(n=this.ds)||void 0===n||n.setLimit(e))}getLimit(e,t,n,i){return"available"!==n||!0===t?0:i?e<this.limit?this.limit:(e>this.limit&&(this.limit=e),e):void 0}}class un{constructor(e){_defineProperty(this,"options",[]),_defineProperty(this,"caption",void 0),_defineProperty(this,"trigger",void 0),_defineProperty(this,"filterType","contains"),_defineProperty(this,"searchTerm",""),_defineProperty(this,"lazyLoading",!1),this.caption=e}get hasMore(){return!1}get isLoading(){return!1}get status(){return"available"}getAll(){return this.getAllWithMatchSorter()}getAllWithMatchSorter(){const e={keys:[e=>this.caption.get(e)],...S(this.filterType)};return""===this.searchTerm&&(e.sorter=e=>e),g(this.options,this.searchTerm||"",e)}setSearchTerm(e){var t;this.searchTerm=e,null===(t=this.trigger)||void 0===t||t.call(this)}onAfterSearchTermChange(e){this.trigger=e}loadMore(){}_updateProps(e){throw new Error("_updateProps not implemented")}_optionToValue(e){throw new Error("_optionToValue not implemented")}_valueToOption(e){throw new Error("_valueToOption not implemented")}}function cn(e,t,i){if("none"===e||!t)return;const o={contains:n.contains,startsWith:n.startsWith};return"containsExact"===e?o.contains(n.attribute(i),n.literal(t)):o[e](n.attribute(i),n.literal(t))}class dn extends un{constructor(e,t){super(e),_defineProperty(this,"valuesMap",void 0),_defineProperty(this,"ds",void 0),_defineProperty(this,"attributeId",void 0),_defineProperty(this,"loading",!1),this.valuesMap=t}get sortOrder(){let e="asc";var t;this.ds&&(e=(null!==(t=this.ds.sortOrder[0])&&void 0!==t?t:[])[1]);return e}get status(){var e,t;return null!==(e=null===(t=this.ds)||void 0===t?void 0:t.status)&&void 0!==e?e:"unavailable"}get hasMore(){var e,t;return null!==(e=null===(t=this.ds)||void 0===t?void 0:t.hasMoreItems)&&void 0!==e&&e}get isLoading(){return this.loading}get datasourceFilter(){var e;return null===(e=this.ds)||void 0===e?void 0:e.filter}getAll(){if(this.lazyLoading&&this.attributeId){if(""===this.searchTerm){var e;null===(e=this.ds)||void 0===e||e.setFilter(void 0)}else{var t;const e=cn(this.filterType,this.searchTerm,this.attributeId);null===(t=this.ds)||void 0===t||t.setFilter(e)}return this.options}return this.getAllWithMatchSorter()}loadMore(){this.ds&&this.hasMore&&(this.ds.setLimit(this.ds.limit+T),this.lazyLoading&&(this.loading=!0))}_optionToValue(e){if(null!==e)return this.valuesMap.get(e)}_valueToOption(e){var t;return null!==(t=null==e?void 0:e.id)&&void 0!==t?t:null}loadSelectedValue(e){if(this.lazyLoading&&this.ds&&this.attributeId){var t;const n=cn("containsExact",e,this.attributeId);null===(t=this.ds)||void 0===t||t.setFilter(n),this.ds.setLimit(1)}}_updateProps(e){var t;this.attributeId=e.attributeId,this.ds=e.ds,this.filterType=e.filterType,this.lazyLoading=e.lazyLoading,this.lazyLoading&&("loading"===e.ds.status?this.loading=!0:this.loading=!1);const n=null!==(t=this.ds.items)&&void 0!==t?t:[];this.valuesMap.clear(),n.forEach((e=>this.valuesMap.set(e.id,e))),this.options=Array.from(this.valuesMap.keys())}}class pn extends dn{_updateProps(e){if(super._updateProps(e),e.attr.value){(Array.isArray(e.attr.value)?e.attr.value:[e.attr.value]).forEach((e=>{this.valuesMap.has(e.id)||this.valuesMap.set(e.id,e)}))}}}class hn{constructor(e){_defineProperty(this,"optionsMap",void 0),_defineProperty(this,"unavailableCaption","<...>"),_defineProperty(this,"formatter",void 0),_defineProperty(this,"customContent",void 0),_defineProperty(this,"customContentType","no"),_defineProperty(this,"emptyCaption",""),this.optionsMap=e}updateProps(e){e.emptyOptionText&&"unavailable"!==e.emptyOptionText.status?this.emptyCaption=e.emptyOptionText.value:this.emptyCaption="",this.formatter=e.formattingAttributeOrExpression,this.customContent=e.customContent,this.customContentType=e.customContentType}get(e){var t;if(null===e)return this.emptyCaption;if(!this.formatter)throw new Error("AssociationSimpleCaptionRenderer: no formatter available.");const n=this.optionsMap.get(e);if(!n)return this.unavailableCaption;const i=this.formatter.get(n);return i&&"unavailable"!==i.status?null!==(t=i.value)&&void 0!==t?t:"":this.unavailableCaption}getCustomContent(e){var t;if(null===e)return null;const n=this.optionsMap.get(e);return n?null===(t=this.customContent)||void 0===t?void 0:t.get(n):null}render(t,n,i){const{customContentType:o}=this;return"no"===o||"label"===n&&"listItem"===o||null===t?e.createElement(E,{htmlFor:i},this.get(t)):e.createElement("div",{className:"widget-combobox-caption-custom"},this.getCustomContent(t))}}class mn{constructor(){_defineProperty(this,"status","unavailable"),_defineProperty(this,"options",void 0),_defineProperty(this,"clearable",!1),_defineProperty(this,"currentId",null),_defineProperty(this,"caption",void 0),_defineProperty(this,"readOnly",!1),_defineProperty(this,"lazyLoading",!1),_defineProperty(this,"loadingType",void 0),_defineProperty(this,"customContentType","no"),_defineProperty(this,"validation",void 0),_defineProperty(this,"_attr",void 0),_defineProperty(this,"onChangeEvent",void 0),_defineProperty(this,"_valuesMap",new Map),_defineProperty(this,"lazyLoader",new ln),this.caption=new hn(this._valuesMap),this.options=new pn(this.caption,this._valuesMap)}updateProps(e){const[t,n,i,o,r,s,a,l,u,c,d,p]=function(e){var t;const n=e.attributeAssociation,i=e.filterType,o=e.onChangeEvent;if(!n)throw new Error("'optionsSourceType' type is 'association' but 'attributeAssociation' is not defined.");const r=e.optionsSourceAssociationDataSource;if(!r)throw new Error("'optionsSourceType' type is 'association' but 'optionsSourceAssociationDataSource' is not defined.");const s=e.optionsSourceAssociationCaptionType,a=e.optionsSourceAssociationCaptionAttribute,l=e.optionsSourceAssociationCaptionExpression;if("attribute"===s&&!a)throw new Error("'optionsSourceAssociationCaptionType' type is 'attribute' but 'optionsSourceAssociationCaptionAttribute' is not defined.");if("expression"===s&&!l)throw new Error("'optionsSourceAssociationCaptionType' type is 'expression' but 'optionsSourceAssociationCaptionExpression' is not defined.");return[n,r,"attribute"===s?a:l,s,e.emptyOptionText,e.clearable,i,o,e.optionsSourceAssociationCustomContent,e.optionsSourceAssociationCustomContentType,null!==(t=e.lazyLoading&&"expression"!==e.optionsSourceAssociationCaptionType)&&void 0!==t&&t,e.loadingType]}(e);if(this.lazyLoader.updateProps(n),this.lazyLoader.setLimit(this.lazyLoader.getLimit(n.limit,t.readOnly,t.status,d)),this._attr=t,this.caption.updateProps({emptyOptionText:r,formattingAttributeOrExpression:i,customContent:u,customContentType:c}),this.options._updateProps({attr:t,ds:n,filterType:a,lazyLoading:d,attributeId:"attribute"===o?i.id:void 0}),!(t&&"unavailable"!==t.status&&n&&"unavailable"!==n.status&&i&&r&&"unavailable"!==r.status))return this.status="unavailable",this.currentId=null,void(this.clearable=!1);this.clearable=s,this.status=t.status,this.readOnly=t.readOnly,this.onChangeEvent=l,this.customContentType=c,this.validation=t.validation,this.lazyLoading=d,this.loadingType=p}setValue(e){an(this.onChangeEvent)}}class vn extends mn{constructor(){super(...arguments),_defineProperty(this,"type","multi"),_defineProperty(this,"selectedItemsStyle","text"),_defineProperty(this,"selectionMethod","checkbox"),_defineProperty(this,"selectAllButton",!1),_defineProperty(this,"selectedItemsSorting","none")}updateProps(e){var t;super.updateProps(e),this.selectedItemsStyle=e.selectedItemsStyle,this.selectionMethod=e.selectionMethod,this.selectAllButton=e.selectAllButton,this.selectedItemsSorting=e.selectedItemsSorting,this.currentId=P(null===(t=this._attr)||void 0===t?void 0:t.value,this.selectedItemsSorting,this.options.sortOrder,(e=>this.caption.get(e))),"rowclick"!==this.selectionMethod&&"yes"!==this.customContentType||(this.selectedItemsStyle="boxes")}setValue(e){var t;const n=null==e?void 0:e.map((e=>this.options._optionToValue(e)));null===(t=this._attr)||void 0===t||t.setValue(n),super.setValue(e)}getOptions(){return"rowclick"===this.selectionMethod?this.options.getAll().filter((e=>{var t;return!(null!==(t=this.currentId)&&void 0!==t&&t.includes(e))})):this.options.getAll()}isOptionsSelected(){const e=this.options.getAll(),t=e.filter((e=>{var t;return!(null!==(t=this.currentId)&&void 0!==t&&t.includes(e))}));return this.currentId&&this.currentId.length>0?0===t.length?"all":"some":0===e.length?"some":"none"}}class fn extends mn{constructor(){super(...arguments),_defineProperty(this,"type","single")}updateProps(e){var t,n;super.updateProps(e),this.currentId=null!==(t=null===(n=this._attr)||void 0===n||null===(n=n.value)||void 0===n?void 0:n.id)&&void 0!==t?t:null}setValue(e){var t;null===(t=this._attr)||void 0===t||t.setValue(this.options._optionToValue(e)),super.setValue(e)}}class gn{constructor(e){_defineProperty(this,"optionsMap",void 0),_defineProperty(this,"unavailableCaption","<...>"),_defineProperty(this,"formatter",void 0),_defineProperty(this,"customContent",void 0),_defineProperty(this,"customContentType","no"),_defineProperty(this,"attribute",void 0),_defineProperty(this,"emptyCaption",""),_defineProperty(this,"overrideCaption",void 0),this.optionsMap=e}updateProps(e){e.emptyOptionText&&"unavailable"!==e.emptyOptionText.status?this.emptyCaption=e.emptyOptionText.value:this.emptyCaption="",this.formatter=e.formattingAttributeOrExpression,this.customContent=e.customContent,this.customContentType=e.customContentType,this.attribute=e.attribute,this.overrideCaption=e.caption}get(e){var t,n;if(null===e)return this.overrideCaption?this.overrideCaption:this.emptyCaption;if(!this.formatter&&this.attribute){const t=this.optionsMap.get(e);if(t)return this.attribute.get(t).displayValue}const i=this.optionsMap.get(e);if(!i)return this.unavailableCaption;const o=null===(t=this.formatter)||void 0===t?void 0:t.get(i);return o&&"unavailable"!==o.status?null!==(n=null==o?void 0:o.value)&&void 0!==n?n:"":this.unavailableCaption}getCustomContent(e){var t;if(null===e)return null;const n=this.optionsMap.get(e);return n?null===(t=this.customContent)||void 0===t?void 0:t.get(n):null}render(t,n,i){const{customContentType:o}=this;return"no"===o||"label"===n&&"listItem"===o||null===t?e.createElement(E,{htmlFor:i},this.get(t)):e.createElement("div",{className:"widget-combobox-caption-custom"},this.getCustomContent(t))}}class yn extends dn{}function bn(e){var t;const n=e.databaseAttributeString,i=e.filterType,r=e.optionsSourceDatabaseDataSource;if(!r)throw new Error("'optionsSourceType' type is 'database' but 'optionsSourceDatabaseDataSource' is not defined.");const s=e.optionsSourceDatabaseCaptionType,a=e.optionsSourceDatabaseCaptionAttribute,l=e.optionsSourceDatabaseCaptionExpression,u=e.emptyOptionText,c=e.clearable,d=e.optionsSourceDatabaseCustomContent,p=e.optionsSourceDatabaseCustomContentType,h=e.optionsSourceDatabaseValueAttribute,m=null!==(t=e.lazyLoading&&"expression"!==e.optionsSourceDatabaseCaptionType)&&void 0!==t&&t,v=e.loadingType;if(n){if(n.value instanceof o.default&&"Integer"!==(null==h?void 0:h.type)&&"Long"!==(null==h?void 0:h.type)&&"Enum"!==(null==h?void 0:h.type))throw new Error("Target attribute is of type Number while Value attribute is of type ".concat(null==h?void 0:h.type));if("string"==typeof n.value&&"String"!==(null==h?void 0:h.type)&&"Enum"!==(null==h?void 0:h.type))throw new Error("Target attribute is of type String while Value attribute is of type ".concat(null==h?void 0:h.type))}return{targetAttribute:n,captionProvider:"attribute"===s?a:l,captionType:s,clearable:c,customContent:d,customContentType:p,ds:r,emptyOption:u,filterType:i,lazyLoading:m,loadingType:v,valueSourceAttribute:h}}class In{constructor(){_defineProperty(this,"caption",void 0),_defineProperty(this,"clearable",!1),_defineProperty(this,"currentId",null),_defineProperty(this,"customContentType","no"),_defineProperty(this,"options",void 0),_defineProperty(this,"lazyLoading",!1),_defineProperty(this,"loadingType",void 0),_defineProperty(this,"readOnly",!1),_defineProperty(this,"selectAllButton",!1),_defineProperty(this,"selectedItemsStyle","text"),_defineProperty(this,"selection",void 0),_defineProperty(this,"selectionMethod","checkbox"),_defineProperty(this,"status","unavailable"),_defineProperty(this,"type","multi"),_defineProperty(this,"lazyLoader",new ln),_defineProperty(this,"_objectsMap",new Map),_defineProperty(this,"selectedItemsSorting","none"),this.caption=new gn(this._objectsMap),this.options=new yn(this.caption,this._objectsMap)}getOptions(){return"rowclick"===this.selectionMethod?this.options.getAll().filter((e=>{var t;return!(null!==(t=this.currentId)&&void 0!==t&&t.includes(e))})):this.options.getAll()}isOptionsSelected(){const e=this.options.getAll(),t=e.filter((e=>{var t;return!(null!==(t=this.currentId)&&void 0!==t&&t.includes(e))}));return this.currentId&&this.currentId.length>0?0===t.length?"all":"some":0===e.length?"some":"none"}updateProps(e){var t;const{captionProvider:n,captionType:i,clearable:o,customContent:r,customContentType:s,ds:a,emptyOption:l,filterType:u,lazyLoading:c,loadingType:d,valueSourceAttribute:p}=bn(e);if(!(a&&"unavailable"!==a.status&&n&&l&&"unavailable"!==l.status))return this.status="unavailable",this.currentId=null,void(this.clearable=!1);this.status="available",this.lazyLoader.updateProps(a),this.lazyLoader.setLimit(this.lazyLoader.getLimit(a.limit,!1,a.status,c)),this.caption.updateProps({emptyOptionText:l,formattingAttributeOrExpression:n,customContent:r,customContentType:s,attribute:p,caption:void 0}),this.options._updateProps({ds:a,filterType:u,lazyLoading:c,attributeId:"attribute"===i?n.id:void 0}),"rowclick"!==this.selectionMethod&&"yes"!==this.customContentType||(this.selectedItemsStyle="boxes"),this.clearable=o,this.customContentType=s,this.lazyLoading=c,this.loadingType=d,this.selectAllButton=e.selectAllButton,this.selectedItemsStyle=e.selectedItemsStyle,this.selection=e.optionsSourceDatabaseItemSelection,this.selectionMethod=e.selectionMethod,this.selectedItemsSorting=e.selectedItemsSorting,this.currentId=P(null===(t=this.selection)||void 0===t?void 0:t.selection,this.selectedItemsSorting,this.options.sortOrder,(e=>this.caption.get(e)))}setValue(e){const t=null==e?void 0:e.map((e=>this.options._optionToValue(e)));var n;t&&(null===(n=this.selection)||void 0===n||n.setSelection(t))}}class xn{constructor(e){_defineProperty(this,"optionsMap",void 0),_defineProperty(this,"attribute",void 0),_defineProperty(this,"emptyValue",void 0),this.optionsMap=e}updateProps(e){this.attribute=e.valueAttribute}get(e){var t,n;if(null===e)return null===(n=this.emptyValue)||void 0===n?void 0:n.value;const i=this.optionsMap.get(e);var o;if(!i)return null===(o=this.emptyValue)||void 0===o?void 0:o.value;if(this.attribute){const e=this.attribute.get(i);var r;return"unavailable"===e.status?null===(r=this.emptyValue)||void 0===r?void 0:r.value:e.value}return null===(t=this.emptyValue)||void 0===t?void 0:t.value}getEmptyValue(){var e;return null===(e=this.emptyValue)||void 0===e?void 0:e.value}}class Cn{constructor(){_defineProperty(this,"caption",void 0),_defineProperty(this,"clearable",!1),_defineProperty(this,"currentId",null),_defineProperty(this,"customContentType","no"),_defineProperty(this,"lazyLoading",!1),_defineProperty(this,"loadingType",void 0),_defineProperty(this,"options",void 0),_defineProperty(this,"readOnly",!1),_defineProperty(this,"status","unavailable"),_defineProperty(this,"type","single"),_defineProperty(this,"_objectsMap",new Map),_defineProperty(this,"lazyLoader",new ln),_defineProperty(this,"validation",void 0),_defineProperty(this,"values",void 0),_defineProperty(this,"_attr",void 0),_defineProperty(this,"selection",void 0),this.caption=new gn(this._objectsMap),this.options=new yn(this.caption,this._objectsMap),this.values=new xn(this._objectsMap)}updateProps(e){var t,n,i,o;const{targetAttribute:r,captionProvider:s,captionType:a,clearable:l,customContent:u,customContentType:c,ds:d,emptyOption:p,filterType:h,lazyLoading:m,loadingType:v,valueSourceAttribute:f}=bn(e);if("loading"!==d.status){if(this._attr=r,this.lazyLoader.updateProps(d),this.lazyLoader.setLimit(this.lazyLoader.getLimit(d.limit,null!==(t=null==r?void 0:r.readOnly)&&void 0!==t&&t,null!==(n=null==r?void 0:r.status)&&void 0!==n?n:d.status,m)),this.caption.updateProps({emptyOptionText:p,formattingAttributeOrExpression:s,customContent:u,customContentType:c,attribute:f,caption:null==r?void 0:r.displayValue}),this.options._updateProps({ds:d,filterType:h,lazyLoading:m,attributeId:"attribute"===a?s.id:void 0}),this.values.updateProps({valueAttribute:f}),!d||"unavailable"===d.status||!p||"unavailable"===p.status)return this.status="unavailable",this.currentId=null,void(this.clearable=!1);if("available"===(null==r?void 0:r.status))if(r.value&&!this.currentId){if(this.options.getAll().length>0){const e=this.options.getAll().find((e=>O(r.value,this.values.get(e))));e&&(this.currentId=e)}else{var g;this.options.loadSelectedValue(null===(g=r.value)||void 0===g?void 0:g.toString())}}else!r.value&&this.currentId&&(this.currentId=null);if(this.readOnly=null!==(i=null==r?void 0:r.readOnly)&&void 0!==i&&i,this.status=null!==(o=null==r?void 0:r.status)&&void 0!==o?o:d.status,this.validation=null==r?void 0:r.validation,this.selection=e.optionsSourceDatabaseItemSelection,this.clearable=l,this.customContentType=c,this.lazyLoading=m,this.loadingType=v,void 0===this.selection.selection){const e=this.options.getAll().find((e=>r&&O(null==r?void 0:r.value,this.values.get(e))));e&&this.selection.setSelection(this.options._optionToValue(e))}}}setValue(e){var t,n,i;const o=this.values.get(e);var r;(null===(t=this._attr)||void 0===t||t.setValue(o),e!==(null!==(n=null===(i=this.selection)||void 0===i||null===(i=i.selection)||void 0===i?void 0:i.id)&&void 0!==n?n:""))&&(null===(r=this.selection)||void 0===r||r.setSelection(this.options._optionToValue(e)));this.currentId=e}}class wn{constructor(){_defineProperty(this,"attr",void 0),_defineProperty(this,"emptyCaption","")}updateProps(e){this.attr=e.attribute,e.emptyOptionText&&"unavailable"!==e.emptyOptionText.status?this.emptyCaption=e.emptyOptionText.value:this.emptyCaption=""}get(e){var t,n;return null===e?this.emptyCaption:null!==(t=null===(n=this.attr)||void 0===n?void 0:n.formatter.format(e))&&void 0!==t?t:""}render(t){return e.createElement("span",{className:"widget-combobox-caption-text"},this.get(t))}}class Tn extends un{constructor(){super(...arguments),_defineProperty(this,"isBoolean",!1)}_updateProps(e){var t,n;"unavailable"===e.attribute.status&&(this.options=[]),this.filterType=e.filterType,this.options=(null!==(t=e.attribute.universe)&&void 0!==t?t:[]).map((e=>e.toString())),this.isBoolean="boolean"==typeof(null===(n=e.attribute.universe)||void 0===n?void 0:n[0])}_optionToValue(e){return this.isBoolean?"true"===e:null!=e?e:void 0}_valueToOption(e){var t;return null!==(t=null==e?void 0:e.toString())&&void 0!==t?t:null}}class En{constructor(){_defineProperty(this,"status","unavailable"),_defineProperty(this,"type","single"),_defineProperty(this,"validation",void 0),_defineProperty(this,"isBoolean",!1),_defineProperty(this,"_attr",void 0),_defineProperty(this,"onChangeEvent",void 0),_defineProperty(this,"currentId",null),_defineProperty(this,"caption",void 0),_defineProperty(this,"options",void 0),_defineProperty(this,"customContentType","no"),_defineProperty(this,"clearable",!0),_defineProperty(this,"readOnly",!1),this.caption=new wn,this.options=new Tn(this.caption)}updateProps(e){var t,n,i;const[o,r,s,a]=function(e){var t;const n=null!==(t=e.attributeEnumeration)&&void 0!==t?t:e.attributeBoolean,i=e.emptyOptionText,o=e.clearable,r=e.filterType;if(!n)throw new Error("'optionsSourceType' type is 'enumeration' or 'boolean' but 'attributeEnumeration' or 'attributeBoolean' is not defined.");return[n,i,o,r]}(e);if(this._attr=o,this.caption.updateProps({attribute:o,emptyOptionText:r}),this.options._updateProps({attribute:o,filterType:a}),!o||"unavailable"===o.status||!r||"unavailable"===r.status)return this.status="unavailable",this.currentId=null,void(this.clearable=!0);this.onChangeEvent=e.onChangeEvent,this.status=o.status,this.isBoolean="boolean"==typeof(null===(t=o.universe)||void 0===t?void 0:t[0]),this.clearable=!this.isBoolean&&s,this.currentId=null!==(n=null===(i=o.value)||void 0===i?void 0:i.toString())&&void 0!==n?n:null,this.readOnly=o.readOnly,this.validation=o.validation}setValue(e){var t;null===(t=this._attr)||void 0===t||t.setValue(this.options._optionToValue(e)),an(this.onChangeEvent)}}class Sn extends un{constructor(e,t){super(e),_defineProperty(this,"valuesMap",void 0),_defineProperty(this,"options",[]),_defineProperty(this,"ds",void 0),_defineProperty(this,"searchTerm",""),_defineProperty(this,"filterType","contains"),this.valuesMap=t}get status(){return this.ds?"available":"unavailable"}getAll(){switch(this.filterType){case"contains":return g(this.options,this.searchTerm||"",{keys:[e=>{var t;return null===(t=this.valuesMap.get(e))||void 0===t?void 0:t.staticDataSourceCaption.value}],sorter:e=>e});case"containsExact":return g(this.options,this.searchTerm||"",{threshold:g.rankings.CONTAINS,keys:[e=>{var t;return null===(t=this.valuesMap.get(e))||void 0===t?void 0:t.staticDataSourceCaption.value}],sorter:e=>e});case"startsWith":return g(this.options,this.searchTerm||"",{threshold:g.rankings.WORD_STARTS_WITH,keys:[e=>{var t;return null===(t=this.valuesMap.get(e))||void 0===t?void 0:t.staticDataSourceCaption.value}],sorter:e=>e});case"none":return g(this.options,this.searchTerm||"",{threshold:g.rankings.NO_MATCH,keys:[e=>{var t;return null===(t=this.valuesMap.get(e))||void 0===t?void 0:t.staticDataSourceCaption.value}],sorter:e=>e})}}_optionToValue(e){var t;if(null!==e)return null===(t=this.valuesMap.get(e.toString()))||void 0===t?void 0:t.staticDataSourceValue.value}_valueToOption(e){var t;return null!==(t=this.options.findIndex((t=>{var n;return(null===(n=this.valuesMap.get(t))||void 0===n?void 0:n.staticDataSourceValue)===e})).toString())&&void 0!==t?t:null}_updateProps(e){this.ds=e.ds,this.filterType=e.filterType,this.valuesMap.clear(),this.ds.forEach(((e,t)=>this.valuesMap.set(t.toString(),e))),this.options=this.ds.map(((e,t)=>t.toString()))}}class On{constructor(e){_defineProperty(this,"optionsMap",void 0),_defineProperty(this,"unavailableCaption","<...>"),_defineProperty(this,"customContent",void 0),_defineProperty(this,"customContentType","no"),_defineProperty(this,"attribute",void 0),_defineProperty(this,"emptyCaption",""),_defineProperty(this,"overrideCaption",void 0),this.optionsMap=e}updateProps(e){e.emptyOptionText&&"unavailable"!==e.emptyOptionText.status?this.emptyCaption=e.emptyOptionText.value:this.emptyCaption="",this.customContent=e.customContent,this.customContentType=e.customContentType,this.attribute=e.attribute,this.overrideCaption=e.caption}get(e){var t;if(null===e)return this.overrideCaption?this.overrideCaption:this.emptyCaption;const n=this.optionsMap.get(e);if(!n)return this.unavailableCaption;const i=n.staticDataSourceCaption;return i.status&&"unavailable"!==i.status?(null===(t=i.value)||void 0===t?void 0:t.toString())||"":this.unavailableCaption}getCustomContent(e){if(null===e)return null;const t=this.optionsMap.get(e);return t?t.staticDataSourceCustomContent:null}render(t,n,i){var o;const{customContentType:r}=this;return"no"===r||"label"===n&&"listItem"===r||null===t?e.createElement(E,{htmlFor:i},null!==(o=this.get(t))&&void 0!==o?o:null):e.createElement("div",{className:"widget-combobox-caption-custom"},this.getCustomContent(t))}}class Pn{constructor(){_defineProperty(this,"type","single"),_defineProperty(this,"attributeType","string"),_defineProperty(this,"selectorType","static"),_defineProperty(this,"status","unavailable"),_defineProperty(this,"options",void 0),_defineProperty(this,"caption",void 0),_defineProperty(this,"clearable",!1),_defineProperty(this,"currentId",null),_defineProperty(this,"readOnly",!1),_defineProperty(this,"customContentType","no"),_defineProperty(this,"validation",void 0),_defineProperty(this,"_attr",void 0),_defineProperty(this,"onChangeEvent",void 0),_defineProperty(this,"_objectsMap",new Map),this.caption=new On(this._objectsMap),this.options=new Sn(this.caption,this._objectsMap)}updateProps(e){var t,n;const[i,o,r,s,a,l,u]=function(e){const t=e.staticAttribute,n=e.filterType,i=e.onChangeEvent;if(!t)throw new Error("'optionsSourceType' type is 'Database' but 'databaseAttributeString' is not defined.");const o=e.optionsSourceStaticDataSource;if(!o)throw new Error("'optionsSourceType' type is 'database' but 'optionsSourceStaticDataSource' is not defined.");return[t,o,e.emptyOptionText,"boolean"!=typeof e.staticAttribute.value&&e.clearable,n,i,e.staticDataSourceCustomContentType]}(e);if(this._attr=i,this.caption.updateProps({emptyOptionText:r,customContentType:u,caption:this._attr.displayValue}),this.options._updateProps({ds:o,filterType:a}),!i||"unavailable"===i.status||!o||"unavailable"===o[0].staticDataSourceValue.status||"unavailable"===o[0].staticDataSourceCaption.status||!r||"unavailable"===r.status)return this.status="unavailable",this.currentId=null,void(this.clearable=!1);if(o.length>0&&"available"===o[0].staticDataSourceValue.status&&""!==i.value){const e=o.findIndex((e=>O(e.staticDataSourceValue.value,i.value)));-1!==e&&(this.currentId=e.toString())}this.clearable=s,this.status=i.status,this.readOnly=i.readOnly,this.onChangeEvent=l,this.customContentType=u,this.validation=i.validation,this.attributeType="boolean"==typeof(null===(t=i.universe)||void 0===t?void 0:t[0])?"boolean":"datetime"===(null===(n=i.formatter)||void 0===n?void 0:n.type)?"date":"string"}setValue(e){var t;const n=this._objectsMap.get(e||"");null===(t=this._attr)||void 0===t||t.setValue(null==n?void 0:n.staticDataSourceValue.value),this.currentId=e,an(this.onChangeEvent)}}function _n(t){const n=e.useRef(void 0),[,i]=e.useState({});return n.current||(n.current=function(e){if("context"===e.source){if(["enumeration","boolean"].includes(e.optionsSourceType))return new En;if("association"===e.optionsSourceType)return"Reference"===e.attributeAssociation.type?new fn:new vn;throw new Error("'optionsSourceType' of type '".concat(e.optionsSourceType,"' is not supported"))}var t;if("database"===e.source)return"Multi"===(null===(t=e.optionsSourceDatabaseItemSelection)||void 0===t?void 0:t.type)?new In:new Cn;if("static"===e.source)return new Pn;throw new Error("Source of type '".concat(e.source,"' is not supported"))}(t),n.current.options.onAfterSearchTermChange((()=>i({})))),n.current.updateProps(t),n.current}return function(t){var n,i,o,r,s,a,l,u,c,d,p,h,m,v,f;const g=_n(t),y=function(t){return e.useMemo((()=>({onFocus:e=>{const{relatedTarget:n,currentTarget:i}=e;null!=i&&i.contains(n)||(an(t.onEnterEvent),t.selector.onEnterEvent&&t.selector.onEnterEvent())},onBlur:e=>{const{relatedTarget:n,currentTarget:i}=e;null!=i&&i.contains(n)||(an(t.onLeaveEvent),t.selector.onLeaveEvent&&t.selector.onLeaveEvent())}})),[t.onEnterEvent,t.onLeaveEvent,t.selector])}({onEnterEvent:t.onEnterEvent,onLeaveEvent:t.onLeaveEvent,selector:g}),b={tabIndex:t.tabIndex,inputId:t.id,labelId:"".concat(t.id,"-label"),noOptionsText:null===(n=t.noOptionsText)||void 0===n?void 0:n.value,readOnlyStyle:t.readOnlyStyle,ariaRequired:t.ariaRequired,a11yConfig:{ariaLabels:{clearSelection:null!==(i=null===(o=t.clearButtonAriaLabel)||void 0===o?void 0:o.value)&&void 0!==i?i:"",removeSelection:null!==(r=null===(s=t.removeValueAriaLabel)||void 0===s?void 0:s.value)&&void 0!==r?r:"",selectAll:null!==(a=null===(l=t.selectAllButtonCaption)||void 0===l?void 0:l.value)&&void 0!==a?a:""},a11yStatusMessage:{a11ySelectedValue:null!==(u=null===(c=t.a11ySelectedValue)||void 0===c?void 0:c.value)&&void 0!==u?u:"",a11yOptionsAvailable:null!==(d=null===(p=t.a11yOptionsAvailable)||void 0===p?void 0:p.value)&&void 0!==d?d:"",a11yInstructions:null!==(h=null===(m=t.a11yInstructions)||void 0===m?void 0:m.value)&&void 0!==h?h:"",a11yNoOption:null!==(v=null===(f=t.noOptionsText)||void 0===f?void 0:f.value)&&void 0!==v?v:""}},menuFooterContent:t.showFooter?t.menuFooterContent:void 0};return e.createElement("div",{className:"widget-combobox",...y},"unavailable"===g.status?e.createElement(zt,null):"single"===g.type?e.createElement(sn,{selector:g,...b}):e.createElement(on,{selector:g,...b}))}}));
